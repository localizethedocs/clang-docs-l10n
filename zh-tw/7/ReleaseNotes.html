<!DOCTYPE html>

<html lang="zh-TW" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Clang 7.0.0 Release Notes &#8212; Clang 7 說明文件</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=fce32b03" />
    <script src="_static/documentation_options.js?v=66322132"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/clang-docs-l10n/ReleaseNotes.html" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜尋" href="search.html" />
    <link rel="next" title="Clang Compiler User&#39;s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" />
<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>

  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 7 說明文件</span></a></h1>
        <h2 class="heading"><span>Clang 7.0.0 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">內容</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User's Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-7-0-0-release-notes">
<h1>Clang 7.0.0 Release Notes<a class="headerlink" href="#clang-7-0-0-release-notes" title="連結到這個標頭">¶</a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-7-0-0" id="id3">What's New in Clang 7.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#major-new-features" id="id4">Major New Features</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-diagnostics" id="id5">Improvements to Clang's diagnostics</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id6">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id7">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id8">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id9">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#windows-support" id="id10">Windows Support</a></p></li>
<li><p><a class="reference internal" href="#objective-c-language-changes-in-clang" id="id11">Objective-C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#opencl-c-c-language-changes-in-clang" id="id12">OpenCL C/C++ Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#openmp-support-in-clang" id="id13">OpenMP Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#cuda-support-in-clang" id="id14">CUDA Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#internal-api-changes" id="id15">Internal API Changes</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id16">clang-format</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id17">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#undefined-behavior-sanitizer-ubsan" id="id18">Undefined Behavior Sanitizer (UBSan)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#libc-changes" id="id19">libc++ Changes</a></p></li>
<li><p><a class="reference internal" href="#additional-information" id="id20">Additional Information</a></p></li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<section id="introduction">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="連結到這個標頭">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 7.0.0. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM
releases may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="what-s-new-in-clang-7-0-0">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">What's New in Clang 7.0.0?</a><a class="headerlink" href="#what-s-new-in-clang-7-0-0" title="連結到這個標頭">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang's support for those languages.</p>
<section id="major-new-features">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Major New Features</a><a class="headerlink" href="#major-new-features" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>A new Implicit Conversion Sanitizer (<code class="docutils literal notranslate"><span class="pre">-fsanitize=implicit-conversion</span></code>) group
was added. Please refer to the <a class="reference internal" href="#release-notes-ubsan"><span class="std std-ref">Undefined Behavior Sanitizer (UBSan)</span></a> section of the
release notes for the details.</p></li>
<li><p>Preliminary/experimental support for DWARF v5 debugging information. If you
compile with <code class="docutils literal notranslate"><span class="pre">-gdwarf-5</span> <span class="pre">-O0</span></code> you should get fully conforming DWARF v5
information, including the new .debug_names accelerator table. Type units
and split DWARF are known not to conform, and higher optimization levels
will likely get a mix of v4 and v5 formats.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Improvements to Clang's diagnostics</a><a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-Wc++98-compat-extra-semi</span></code> is a new flag, which was previously inseparable
from <code class="docutils literal notranslate"><span class="pre">-Wc++98-compat-pedantic</span></code>. The latter still controls the new flag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wextra-semi</span></code> now also controls <code class="docutils literal notranslate"><span class="pre">-Wc++98-compat-extra-semi</span></code>.
Please do note that if you pass <code class="docutils literal notranslate"><span class="pre">-Wno-c++98-compat-pedantic</span></code>, it implies
<code class="docutils literal notranslate"><span class="pre">-Wno-c++98-compat-extra-semi</span></code>, so if you want that diagnostic, you need
to explicitly re-enable it (e.g. by appending <code class="docutils literal notranslate"><span class="pre">-Wextra-semi</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wself-assign</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wself-assign-field</span></code> were extended to diagnose
self-assignment operations using overloaded operators (i.e. classes).
If you are doing such an assignment intentionally, e.g. in a unit test for
a data structure, the first warning can be disabled by passing
<code class="docutils literal notranslate"><span class="pre">-Wno-self-assign-overloaded</span></code>, also the warning can be suppressed by adding
<code class="docutils literal notranslate"><span class="pre">*&amp;</span></code> to the right-hand side or casting it to the appropriate reference type.</p></li>
</ul>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>Clang binary and libraries have been renamed from 7.0 to 7.
For example, the <code class="docutils literal notranslate"><span class="pre">clang</span></code> binary will be called <code class="docutils literal notranslate"><span class="pre">clang-7</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">clang-7.0</span></code>.</p></li>
<li><p>The optimization flag to merge constants (<code class="docutils literal notranslate"><span class="pre">-fmerge-all-constants</span></code>) is no
longer applied by default.</p></li>
<li><p>Clang implements a collection of recent fixes to the C++ standard's definition
of &quot;standard-layout&quot;. In particular, a class is only considered to be
standard-layout if all base classes and the first data member (or bit-field)
can be laid out at offset zero.</p></li>
<li><p>Clang's handling of the GCC <code class="docutils literal notranslate"><span class="pre">packed</span></code> class attribute in C++ has been fixed
to apply only to non-static data members and not to base classes. This fixes
an ABI difference between Clang and GCC, but creates an ABI difference between
Clang 7 and earlier versions. The old behavior can be restored by setting
<code class="docutils literal notranslate"><span class="pre">-fclang-abi-compat</span></code> to <code class="docutils literal notranslate"><span class="pre">6</span></code> or lower.</p></li>
<li><p>Clang implements the proposed resolution of LWG issue 2358, along with the
<a class="reference external" href="https://github.com/itanium-cxx-abi/cxx-abi/pull/51">corresponding change to the Itanium C++ ABI</a>, which make classes
containing only unnamed non-zero-length bit-fields be considered non-empty.
This is an ABI break compared to prior Clang releases, but makes Clang
generate code that is ABI-compatible with other compilers. The old
behavior can be restored by setting <code class="docutils literal notranslate"><span class="pre">-fclang-abi-compat</span></code> to <code class="docutils literal notranslate"><span class="pre">6</span></code> or
lower.</p></li>
<li><p>An existing tool named <code class="docutils literal notranslate"><span class="pre">diagtool</span></code> has been added to the release. As the
name suggests, it helps with dealing with diagnostics in <code class="docutils literal notranslate"><span class="pre">clang</span></code>, such as
finding out the warning hierarchy, and which of them are enabled by default
or for a particular compiler invocation.</p></li>
<li><p>By default, Clang emits an address-significance table into
every ELF object file when using the integrated assembler.
Address-significance tables allow linkers to implement <a class="reference external" href="https://research.google.com/pubs/archive/36912.pdf">safe ICF</a> without the false
positives that can result from other implementation techniques such as
relocation scanning. The <code class="docutils literal notranslate"><span class="pre">-faddrsig</span></code> and <code class="docutils literal notranslate"><span class="pre">-fno-addrsig</span></code> flags can be
used to control whether to emit the address-significance table.</p></li>
<li><p>The integrated assembler is enabled by default on OpenBSD / FreeBSD
for MIPS 64-bit targets.</p></li>
<li><p>On MIPS FreeBSD, default CPUs have been changed to <code class="docutils literal notranslate"><span class="pre">mips2</span></code>
for 32-bit targets and <code class="docutils literal notranslate"><span class="pre">mips3</span></code> for 64-bit targets.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="連結到這個標頭">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-fstrict-float-cast-overflow</span></code> and <code class="docutils literal notranslate"><span class="pre">-fno-strict-float-cast-overflow</span></code>.</p>
<p>When converting a floating-point value to int and the value is not
representable in the destination integer type,
the code has undefined behavior according to the language standard. By
default, Clang will not guarantee any particular result in that case. With the
'no-strict' option, Clang attempts to match the overflowing behavior of the
target's native float-to-int conversion instructions.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fforce-emit-vtables</span></code> and <code class="docutils literal notranslate"><span class="pre">-fno-force-emit-vtables</span></code>.</p>
<p>In order to improve devirtualization, forces emission of vtables even in
modules where it isn't necessary. It causes more inline virtual functions
to be emitted.</p>
</li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-mcrc</span></code> and <code class="docutils literal notranslate"><span class="pre">-mno-crc</span></code> flags to enable/disable using
of MIPS Cyclic Redundancy Check instructions.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-mvirt</span></code> and <code class="docutils literal notranslate"><span class="pre">-mno-virt</span></code> flags to enable/disable using
of MIPS Virtualization instructions.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-mginv</span></code> and <code class="docutils literal notranslate"><span class="pre">-mno-ginv</span></code> flags to enable/disable using
of MIPS Global INValidate instructions.</p></li>
</ul>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>Before Clang 7, we prepended the <cite>#</cite> character to the <code class="docutils literal notranslate"><span class="pre">--autocomplete</span></code>
argument to enable cc1 flags. For example, when the <code class="docutils literal notranslate"><span class="pre">-cc1</span></code> or <code class="docutils literal notranslate"><span class="pre">-Xclang</span></code> flag
is in the <strong class="program">clang</strong> invocation, the shell executed
<code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">--autocomplete=#-&lt;flag</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">completed&gt;</span></code>. Clang 7 now requires the
whole invocation including all flags to be passed to the <code class="docutils literal notranslate"><span class="pre">--autocomplete</span></code> like
this: <code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">--autocomplete=-cc1,-xc++,-fsyn</span></code>.</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>Clang now supports function multiversioning with attribute 'target' on ELF
based x86/x86-64 environments by using indirect functions. This implementation
has a few minor limitations over the GCC implementation for the sake of AST
sanity, however it is otherwise compatible with existing code using this
feature for GCC. Consult the <a class="reference external" href="AttributeReference.html#target-gnu-target">documentation for the target attribute</a> for more information.</p></li>
</ul>
</section>
<section id="windows-support">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Windows Support</a><a class="headerlink" href="#windows-support" title="連結到這個標頭">¶</a></h3>
<ul>
<li><p>clang-cl's support for precompiled headers has been much improved:</p>
<blockquote>
<div><ul class="simple">
<li><p>When using a pch file, clang-cl now no longer redundantly emits inline
methods that are already stored in the obj that was built together with
the pch file (matching cl.exe).  This speeds up builds using pch files
by around 30%.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">/Ycfoo.h</span></code> and <code class="docutils literal notranslate"><span class="pre">/Yufoo.h</span></code> flags can now be used without <code class="docutils literal notranslate"><span class="pre">/FIfoo.h</span></code> when
foo.h is instead included by an explicit <code class="docutils literal notranslate"><span class="pre">#include</span></code> directive. This means
Visual Studio's default stdafx.h setup now uses precompiled headers with
clang-cl.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The alternative entry point names
(<code class="docutils literal notranslate"><span class="pre">wmain</span></code>/<code class="docutils literal notranslate"><span class="pre">WinMain</span></code>/<code class="docutils literal notranslate"><span class="pre">wWinMain</span></code>/<code class="docutils literal notranslate"><span class="pre">DllMain</span></code>) now are properly mangled
as plain C names in C++ contexts when targeting MinGW, without having to
explicit specify <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code>. (This was already the case for MSVC
targets.)</p></li>
</ul>
</section>
<section id="objective-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Objective-C Language Changes in Clang</a><a class="headerlink" href="#objective-c-language-changes-in-clang" title="連結到這個標頭">¶</a></h3>
<p>Clang now supports the GNUstep Objective-C ABI v2 on ELF platforms.  This is
enabled with the <code class="docutils literal notranslate"><span class="pre">-fobjc-runtime=gnustep-2.0</span></code> flag.  The new ABI is incompatible
with the older GNUstep ABIs, which were incremental changes on the old GCC ABI.
The new ABI provides richer reflection metadata and allows the linker to remove
duplicate selector and protocol definitions, giving smaller binaries.  Windows
support for the new ABI is underway, but was not completed in time for the LLVM
7.0.0 release.</p>
</section>
<section id="opencl-c-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">OpenCL C/C++ Language Changes in Clang</a><a class="headerlink" href="#opencl-c-c-language-changes-in-clang" title="連結到這個標頭">¶</a></h3>
<p>Miscellaneous changes in OpenCL C:</p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">cles_khr_int64</span></code> extension.</p></li>
<li><p>Added bug fixes and simplifications to Clang blocks in OpenCL mode.</p></li>
<li><p>Added compiler flag <code class="docutils literal notranslate"><span class="pre">-cl-uniform-work-group-size</span></code> to allow extra compile time optimisation.</p></li>
<li><p>Propagate <code class="docutils literal notranslate"><span class="pre">denorms-are-zero</span></code> attribute to IR if <code class="docutils literal notranslate"><span class="pre">-cl-denorms-are-zero</span></code> is passed to the compiler.</p></li>
<li><p>Separated <code class="docutils literal notranslate"><span class="pre">read_only</span></code> and <code class="docutils literal notranslate"><span class="pre">write_only</span></code> pipe IR types.</p></li>
<li><p>Fixed address space for the <code class="docutils literal notranslate"><span class="pre">__func__</span></code> predefined macro.</p></li>
<li><p>Improved diagnostics of kernel argument types.</p></li>
</ul>
<p>Started OpenCL C++ support:</p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-std/-cl-std=c++</span></code>.</p></li>
<li><p>Added support for keywords.</p></li>
</ul>
</section>
<section id="openmp-support-in-clang">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">OpenMP Support in Clang</a><a class="headerlink" href="#openmp-support-in-clang" title="連結到這個標頭">¶</a></h3>
<ul>
<li><p>Clang gained basic support for OpenMP 4.5 offloading for NVPTX target.</p>
<p>To compile your program for NVPTX target use the following options:
<code class="docutils literal notranslate"><span class="pre">-fopenmp</span> <span class="pre">-fopenmp-targets=nvptx64-nvidia-cuda</span></code> for 64 bit platforms or
<code class="docutils literal notranslate"><span class="pre">-fopenmp</span> <span class="pre">-fopenmp-targets=nvptx-nvidia-cuda</span></code> for 32 bit platform.</p>
</li>
<li><p>Passing options to the OpenMP device offloading toolchain can be done using
the <code class="docutils literal notranslate"><span class="pre">-Xopenmp-target=&lt;triple&gt;</span> <span class="pre">-opt=val</span></code> flag. In this way the <code class="docutils literal notranslate"><span class="pre">-opt=val</span></code>
option will be forwarded to the respective OpenMP device offloading toolchain
described by the triple. For example passing the compute capability to
the OpenMP NVPTX offloading toolchain can be done as follows:
<code class="docutils literal notranslate"><span class="pre">-Xopenmp-target=nvptx64-nvidia-cuda</span> <span class="pre">-march=sm_60</span></code>. For the case when only one
target offload toolchain is specified under the <code class="docutils literal notranslate"><span class="pre">-fopenmp-targets=&lt;triples&gt;</span></code>
option, then the triple can be skipped: <code class="docutils literal notranslate"><span class="pre">-Xopenmp-target</span> <span class="pre">-march=sm_60</span></code>.</p></li>
<li><p>Other bugfixes.</p></li>
</ul>
</section>
<section id="cuda-support-in-clang">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">CUDA Support in Clang</a><a class="headerlink" href="#cuda-support-in-clang" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>Clang will now try to locate the CUDA installation next to <strong class="program">ptxas</strong>
in the <cite>PATH</cite> environment variable. This behavior can be turned off by passing
the new flag <code class="docutils literal notranslate"><span class="pre">--cuda-path-ignore-env</span></code>.</p></li>
<li><p>Clang now supports generating object files with relocatable device code. This
feature needs to be enabled with <code class="docutils literal notranslate"><span class="pre">-fcuda-rdc</span></code> and may result in performance
penalties compared to whole program compilation. Please note that NVIDIA's
<strong class="program">nvcc</strong> must be used for linking.</p></li>
</ul>
</section>
<section id="internal-api-changes">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Internal API Changes</a><a class="headerlink" href="#internal-api-changes" title="連結到這個標頭">¶</a></h3>
<p>These are major API changes that have happened since the 6.0.0 release of
Clang. If upgrading an external codebase that uses Clang as a library,
this section should help get you past the largest hurdles of upgrading.</p>
<ul class="simple">
<li><p>The methods <code class="docutils literal notranslate"><span class="pre">getLocStart</span></code>, <code class="docutils literal notranslate"><span class="pre">getStartLoc</span></code> and <code class="docutils literal notranslate"><span class="pre">getLocEnd</span></code> in the AST
classes are deprecated.  New APIs <code class="docutils literal notranslate"><span class="pre">getBeginLoc</span></code> and <code class="docutils literal notranslate"><span class="pre">getEndLoc</span></code> should
be used instead.  While the old methods remain in this release, they will
not be present in the next release of Clang.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>Clang-format will now support detecting and formatting code snippets in raw
string literals.  This is configured through the <code class="docutils literal notranslate"><span class="pre">RawStringFormats</span></code> style
option.</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="連結到這個標頭">¶</a></h3>
<ul class="simple">
<li><p>The new <cite>MmapWriteExec</cite> checker had been introduced to detect attempts to map pages both writable and executable.</p></li>
</ul>
</section>
<section id="undefined-behavior-sanitizer-ubsan">
<span id="release-notes-ubsan"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">Undefined Behavior Sanitizer (UBSan)</a><a class="headerlink" href="#undefined-behavior-sanitizer-ubsan" title="連結到這個標頭">¶</a></h3>
<ul>
<li><p>A new Implicit Conversion Sanitizer (<code class="docutils literal notranslate"><span class="pre">-fsanitize=implicit-conversion</span></code>) group
was added.</p>
<p>Currently, only one type of issues is caught - implicit integer truncation
(<code class="docutils literal notranslate"><span class="pre">-fsanitize=implicit-integer-truncation</span></code>), also known as integer demotion.
While there is a <code class="docutils literal notranslate"><span class="pre">-Wconversion</span></code> diagnostic group that catches this kind of
issues, it is both noisy, and does not catch <strong>all</strong> the cases.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">bool</span><span class="w"> </span><span class="nf">consume</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consume</span><span class="p">(</span><span class="n">val</span><span class="p">))</span><span class="w"> </span><span class="c1">// the value may have been silently truncated.</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">768</span><span class="p">;</span><span class="w"> </span><span class="c1">// before addition, &#39;store&#39; was promoted to int.</span>
<span class="w">  </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">consume</span><span class="p">((</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="n">val</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK, the truncation is explicit.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Just like other <code class="docutils literal notranslate"><span class="pre">-fsanitize=integer</span></code> checks, these issues are <strong>not</strong>
undefined behaviour. But they are not <em>always</em> intentional, and are somewhat
hard to track down. This group is <strong>not</strong> enabled by <code class="docutils literal notranslate"><span class="pre">-fsanitize=undefined</span></code>,
but the <code class="docutils literal notranslate"><span class="pre">-fsanitize=implicit-integer-truncation</span></code> check
is enabled by <code class="docutils literal notranslate"><span class="pre">-fsanitize=integer</span></code>.</p>
</li>
</ul>
</section>
</section>
<section id="libc-changes">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">libc++ Changes</a><a class="headerlink" href="#libc-changes" title="連結到這個標頭">¶</a></h2>
<p>Users that wish to link together translation units built with different
versions of libc++'s headers into the same final linked image should define the
<cite>_LIBCPP_HIDE_FROM_ABI_PER_TU</cite> macro to <cite>1</cite> when building those translation
units. In a future release, not defining <cite>_LIBCPP_HIDE_FROM_ABI_PER_TU</cite> to <cite>1</cite>
and linking translation units built with different versions of libc++'s headers
together may lead to ODR violations and ABI issues.</p>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="連結到這個標頭">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Subversion version of
the source code. You can access versions of these documents specific to
this release by going into the &quot;<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>&quot; directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us via the <a class="reference external" href="https://lists.llvm.org/mailman/listinfo/cfe-dev">mailing
list</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">內容</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User's Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; 版權所有 2007-2025, The Clang Team.
      使用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3 建立。
    </div>
  </body>
</html>