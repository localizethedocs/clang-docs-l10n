<!DOCTYPE html>

<html lang="zh-CN" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Clang 5.0.0 Release Notes &#8212; Clang 5 文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=fce32b03" />
    <script src="_static/documentation_options.js?v=33a179f1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/clang-docs-l10n/ReleaseNotes.html" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="Clang Compiler User&#39;s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" />
<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>

  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 5 文档</span></a></h1>
        <h2 class="heading"><span>Clang 5.0.0 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">目录</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User's Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-5-0-0-release-notes">
<h1>Clang 5.0.0 Release Notes<a class="headerlink" href="#clang-5-0-0-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id4">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-5-0-0" id="id5">What's New in Clang 5.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#major-new-features" id="id6">Major New Features</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id7">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id8">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#new-pragmas-in-clang" id="id9">New Pragmas in Clang</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id10">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#c-language-changes-in-clang" id="id11">C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id12">C++ Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#objective-c-language-changes-in-clang" id="id13">Objective-C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#opencl-c-language-changes-in-clang" id="id14">OpenCL C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id15">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id16">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id17">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#undefined-behavior-sanitizer-ubsan" id="id18">Undefined Behavior Sanitizer (UBSan)</a></p></li>
<li><p><a class="reference internal" href="#python-binding-changes" id="id19">Python Binding Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-information" id="id20">Additional Information</a></p></li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="http://llvm.org/">LLVM Team</a></p>
<section id="introduction">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 5.0.0. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="http://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM
releases may be downloaded from the <a class="reference external" href="http://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="http://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="http://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="what-s-new-in-clang-5-0-0">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">What's New in Clang 5.0.0?</a><a class="headerlink" href="#what-s-new-in-clang-5-0-0" title="Link to this heading">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang's support for those languages.</p>
<section id="major-new-features">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Major New Features</a><a class="headerlink" href="#major-new-features" title="Link to this heading">¶</a></h3>
<section id="c-coroutines">
<h4>C++ coroutines<a class="headerlink" href="#c-coroutines" title="Link to this heading">¶</a></h4>
<p><a class="reference external" href="http://open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4680.pdf">C++ coroutines TS</a>
implementation has landed. Use <code class="docutils literal notranslate"><span class="pre">-fcoroutines-ts</span> <span class="pre">-stdlib=libc++</span></code> to enable
coroutine support. Here is <a class="reference external" href="https://wandbox.org/permlink/Dth1IO5q8Oe31ew2">an example</a> to get you started.</p>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h4>Improvements to Clang's diagnostics<a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-Wcast-qual</span></code> was implemented for C++. C-style casts are now properly
diagnosed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wunused-lambda-capture</span></code> warns when a variable explicitly captured
by a lambda is not used in the body of the lambda.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wstrict-prototypes</span></code> is a new warning that warns about non-prototype
function and block declarations and types in C and Objective-C.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wunguarded-availability</span></code> is a new warning that warns about uses of new
APIs that were introduced in a system whose version is newer than the
deployment target version. A new Objective-C expression <code class="docutils literal notranslate"><span class="pre">&#64;available</span></code> has
been introduced to perform system version checking at runtime. This warning
is off by default to prevent unexpected warnings in existing projects.
However, its less strict sibling <code class="docutils literal notranslate"><span class="pre">-Wunguarded-availability-new</span></code> is on by
default. It warns about unguarded uses of APIs only when they were introduced
in or after macOS 10.13, iOS 11, tvOS 11 or watchOS 4.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wdocumentation</span></code> warning now allows the use of <code class="docutils literal notranslate"><span class="pre">\param</span></code> and
<code class="docutils literal notranslate"><span class="pre">\returns</span></code> documentation directives in the documentation comments for
declarations with a function or a block pointer type.</p></li>
<li><p>The compiler no longer warns about unreachable <code class="docutils literal notranslate"><span class="pre">__builtin_unreachable</span></code>
statements.</p></li>
</ul>
</section>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--autocomplete</span></code> was implemented to obtain a list of flags and its arguments.
This is used for shell autocompletion.</p></li>
</ul>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Link to this heading">¶</a></h3>
<p>The following options are deprecated and ignored. They will be removed in
future versions of Clang.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-fslp-vectorize-aggressive</span></code> used to enable the BB vectorizing pass. They have been superseeded
by the normal SLP vectorizer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fno-slp-vectorize-aggressive</span></code> used to be the default behavior of clang.</p></li>
</ul>
</section>
<section id="new-pragmas-in-clang">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">New Pragmas in Clang</a><a class="headerlink" href="#new-pragmas-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now supports the <code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">attribute</span></code> pragma that allows users to apply
an attribute to multiple declarations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pragma</span> <span class="pre">pack</span></code> directives that are included in a precompiled header are now
applied correctly to the declarations in the compilation unit that includes
that precompiled header.</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">overloadable</span></code> attribute now allows at most one function with a given
name to lack the <code class="docutils literal notranslate"><span class="pre">overloadable</span></code> attribute. This unmarked function will not
have its name mangled.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ms_abi</span></code> attribute and the <code class="docutils literal notranslate"><span class="pre">__builtin_ms_va_list</span></code> types and builtins
are now supported on AArch64.</p></li>
</ul>
</section>
<section id="c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">C Language Changes in Clang</a><a class="headerlink" href="#c-language-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added near complete support for implicit scalar to vector conversion, a GNU
C/C++ language extension. With this extension, the following code is
considered valid:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">v4i32</span><span class="w"> </span><span class="nf">__attribute__</span><span class="p">((</span><span class="n">vector_size</span><span class="p">(</span><span class="mi">16</span><span class="p">)));</span>

<span class="n">v4i32</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">v4i32</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Here 5 is implicitly casted to an unsigned value and replicated into a</span>
<span class="w">  </span><span class="c1">// vector with as many elements as &#39;a&#39;.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The implicit conversion of a scalar value to a vector value--in the context of
a vector expression--occurs when:</p>
<ul class="simple">
<li><p>The type of the vector is that of a <code class="docutils literal notranslate"><span class="pre">__attribute__((vector_size(size)))</span></code>
vector, not an OpenCL <code class="docutils literal notranslate"><span class="pre">__attribute__((ext_vector_type(size)))</span></code> vector type.</p></li>
<li><p>The scalar value can be casted to that of the vector element's type without
the loss of precision based on the type of the scalar and the type of the
vector's elements.</p></li>
<li><p>For compile time constant values, the above rule is weakened to consider the
value of the scalar constant rather than the constant's type. However,
for compatibility with GCC, floating point constants with precise integral
representations are not implicitly converted to integer values.</p></li>
</ul>
<p>Currently the basic integer and floating point types with the following
operators are supported: <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code> and the corresponding
assignment operators where applicable.</p>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">C++ Language Changes in Clang</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>We expect this to be the last Clang release that defaults to <code class="docutils literal notranslate"><span class="pre">-std=gnu++98</span></code>
when using the GCC-compatible <code class="docutils literal notranslate"><span class="pre">clang++</span></code> driver. From Clang 6 onwards we
expect to use <code class="docutils literal notranslate"><span class="pre">-std=gnu++14</span></code> or a later standard by default, to match the
behavior of recent GCC releases. Users are encouraged to change their build
files to explicitly specify their desired C++ standard.</p></li>
<li><p>Support for the C++17 standard has been completed. This mode can be enabled
using <code class="docutils literal notranslate"><span class="pre">-std=c++17</span></code> (the old flag <code class="docutils literal notranslate"><span class="pre">-std=c++1z</span></code> is still supported for
compatibility).</p></li>
<li><p>When targeting a platform that uses the Itanium C++ ABI, Clang implements a
<a class="reference external" href="https://github.com/itanium-cxx-abi/cxx-abi/commit/7099637aba11fed6bdad7ee65bf4fd3f97fbf076">recent change to the ABI</a> that passes objects of class type indirectly if they
have a non-trivial move constructor. Previous versions of Clang only
considered the copy constructor, resulting in an ABI change in rare cases,
but GCC has already implemented this change for several releases.
This affects all targets other than Windows and PS4. You can opt out of this
ABI change with <code class="docutils literal notranslate"><span class="pre">-fclang-abi-compat=4.0</span></code>.</p></li>
<li><p>As mentioned in <a class="reference internal" href="#c-language-changes-in-clang">C Language Changes in Clang</a>, Clang's support for
implicit scalar to vector conversions also applies to C++. Additionally
the following operators are also supported: <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">||</span></code>.</p></li>
</ul>
</section>
<section id="objective-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Objective-C Language Changes in Clang</a><a class="headerlink" href="#objective-c-language-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now guarantees that a <code class="docutils literal notranslate"><span class="pre">readwrite</span></code> property is synthesized when an
ambiguous property (i.e. a property that's declared in multiple protocols)
is synthesized. The <code class="docutils literal notranslate"><span class="pre">-Wprotocol-property-synthesis-ambiguity</span></code> warning that
warns about incompatible property types is now promoted to an error when
there's an ambiguity between <code class="docutils literal notranslate"><span class="pre">readwrite</span></code> and <code class="docutils literal notranslate"><span class="pre">readonly</span></code> properties.</p></li>
<li><p>Clang now prohibits synthesis of ambiguous properties with incompatible
explicit property attributes. The following property attributes are
checked for differences: <code class="docutils literal notranslate"><span class="pre">copy</span></code>, <code class="docutils literal notranslate"><span class="pre">retain</span></code>/<code class="docutils literal notranslate"><span class="pre">strong</span></code>, <code class="docutils literal notranslate"><span class="pre">atomic</span></code>,
<code class="docutils literal notranslate"><span class="pre">getter</span></code> and <code class="docutils literal notranslate"><span class="pre">setter</span></code>.</p></li>
</ul>
</section>
<section id="opencl-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">OpenCL C Language Changes in Clang</a><a class="headerlink" href="#opencl-c-language-changes-in-clang" title="Link to this heading">¶</a></h3>
<p>Various bug fixes and improvements:</p>
<ul class="simple">
<li><p>Extended OpenCL-related Clang tests.</p></li>
<li><p>Improved diagnostics across several areas: scoped address space
qualified variables, function pointers, atomics, type rank for overloading,
block captures, <code class="docutils literal notranslate"><span class="pre">reserve_id_t</span></code>.</p></li>
<li><p>Several address space related fixes for constant address space function scope variables,
IR generation, mangling of <code class="docutils literal notranslate"><span class="pre">generic</span></code> and alloca (post-fix from general Clang
refactoring of address spaces).</p></li>
<li><p>Several improvements in extensions: fixed OpenCL version for <code class="docutils literal notranslate"><span class="pre">cl_khr_mipmap_image</span></code>,
added missing <code class="docutils literal notranslate"><span class="pre">cl_khr_3d_image_writes</span></code>.</p></li>
<li><p>Improvements in <code class="docutils literal notranslate"><span class="pre">enqueue_kernel</span></code>, especially the implementation of <code class="docutils literal notranslate"><span class="pre">ndrange_t</span></code> and blocks.</p></li>
<li><p>OpenCL type related fixes: global samplers, the <code class="docutils literal notranslate"><span class="pre">pipe_t</span></code> size, internal type redefinition,
and type compatibility checking in ternary and other operations.</p></li>
<li><p>The OpenCL header has been extended with missing extension guards, and direct mapping of <code class="docutils literal notranslate"><span class="pre">as_type</span></code>
to <code class="docutils literal notranslate"><span class="pre">__builtin_astype</span></code>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">kernel_arg_type_qual</span></code> and OpenCL/SPIR version in metadata.</p></li>
<li><p>Added proper use of the kernel calling convention to various targets.</p></li>
</ul>
<p>The following new functionalities have been added:</p>
<ul class="simple">
<li><p>Added documentation on OpenCL to Clang user manual.</p></li>
<li><p>Extended Clang builtins with required <code class="docutils literal notranslate"><span class="pre">cl_khr_subgroups</span></code> support.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">intel_reqd_sub_group_size</span></code> attribute support.</p></li>
<li><p>Added OpenCL types to <code class="docutils literal notranslate"><span class="pre">CIndex</span></code>.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Option <strong>BreakBeforeInheritanceComma</strong> added to break before <code class="docutils literal notranslate"><span class="pre">:</span></code> and <code class="docutils literal notranslate"><span class="pre">,</span></code>  in case of
multiple inheritance in a class declaration. Enabled by default in the Mozilla coding style.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>true</p></th>
<th class="head"><p>false</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">X</span>
<span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span>
<span class="p">};</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span>
<span class="p">};</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>Align block comment decorations.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Before</p></th>
<th class="head"><p>After</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/* line 1</span>
<span class="cm">  * line 2</span>
<span class="cm"> */</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/* line 1</span>
<span class="cm"> * line 2</span>
<span class="cm"> */</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>The <a class="reference internal" href="ClangFormatStyleOptions.html"><span class="doc">Clang-Format Style Options</span></a> documentation provides detailed examples for most options.</p></li>
<li><p>Namespace end comments are now added or updated automatically.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Before</p></th>
<th class="head"><p>After</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">A</span><span class="w"> </span><span class="p">{</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">A</span><span class="w"> </span><span class="p">{</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// namespace A</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>Comment reflow support added. Overly long comment lines will now be reflown with the rest of
the paragraph instead of just broken. Option <strong>ReflowComments</strong> added and enabled by default.</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">libclang</a><a class="headerlink" href="#libclang" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Libclang now provides code-completion results for more C++ constructs
and keywords. The following keywords/identifiers are now included in the
code-completion results: <code class="docutils literal notranslate"><span class="pre">static_assert</span></code>, <code class="docutils literal notranslate"><span class="pre">alignas</span></code>, <code class="docutils literal notranslate"><span class="pre">constexpr</span></code>,
<code class="docutils literal notranslate"><span class="pre">final</span></code>, <code class="docutils literal notranslate"><span class="pre">noexcept</span></code>, <code class="docutils literal notranslate"><span class="pre">override</span></code> and <code class="docutils literal notranslate"><span class="pre">thread_local</span></code>.</p></li>
<li><p>Libclang now provides code-completion results for members from dependent
classes. For example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">appendValue</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">dest</span><span class="p">.</span><span class="w"> </span><span class="c1">// Relevant completion results are now shown after &#39;.&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that code-completion results are still not provided when the member
expression includes a dependent base expression. For example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">appendValue</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">dest</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="w"> </span><span class="c1">// Libclang fails to provide completion results after &#39;.&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The static analyzer now supports using the
<a class="reference external" href="https://github.com/z3prover/z3">z3 theorem prover</a> from Microsoft Research
as an external constraint solver. This allows reasoning over more complex
queries, but performance is ~15x slower than the default range-based
constraint solver. To enable the z3 solver backend, clang must be built with
the <code class="docutils literal notranslate"><span class="pre">CLANG_ANALYZER_BUILD_Z3=ON</span></code> option, and the
<code class="docutils literal notranslate"><span class="pre">-Xanalyzer</span> <span class="pre">-analyzer-constraints=z3</span></code> arguments passed at runtime.</p></li>
</ul>
</section>
<section id="undefined-behavior-sanitizer-ubsan">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Undefined Behavior Sanitizer (UBSan)</a><a class="headerlink" href="#undefined-behavior-sanitizer-ubsan" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The Undefined Behavior Sanitizer has a new check for pointer overflow. This
check is on by default. The flag to control this functionality is
<code class="docutils literal notranslate"><span class="pre">-fsanitize=pointer-overflow</span></code>.</p>
<p>Pointer overflow is an indicator of undefined behavior: when a pointer
indexing expression wraps around the address space, or produces other
unexpected results, its result may not point to a valid object.</p>
</li>
<li><p>UBSan has several new checks which detect violations of nullability
annotations. These checks are off by default. The flag to control this group
of checks is <code class="docutils literal notranslate"><span class="pre">-fsanitize=nullability</span></code>. The checks can be individially enabled
by <code class="docutils literal notranslate"><span class="pre">-fsanitize=nullability-arg</span></code> (which checks calls),
<code class="docutils literal notranslate"><span class="pre">-fsanitize=nullability-assign</span></code> (which checks assignments), and
<code class="docutils literal notranslate"><span class="pre">-fsanitize=nullability-return</span></code> (which checks return statements).</p></li>
<li><p>UBSan can now detect invalid loads from bitfields and from ObjC BOOLs.</p></li>
<li><p>UBSan can now avoid emitting unnecessary type checks in C++ class methods and
in several other cases where the result is known at compile-time. UBSan can
also avoid emitting unnecessary overflow checks in arithmetic expressions
with promoted integer operands.</p></li>
</ul>
</section>
<section id="python-binding-changes">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Link to this heading">¶</a></h3>
<p>Python bindings now support both Python 2 and Python 3.</p>
<p>The following methods have been added:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_scoped_enum</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">Cursor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception_specification_kind</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">Cursor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_address_space</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">Type</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_typedef_name</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">Type</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_exception_specification_kind</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">Type</span></code>.</p></li>
</ul>
</section>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Link to this heading">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="http://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Subversion version of
the source code. You can access versions of these documents specific to
this release by going into the &quot;<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>&quot; directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us via the <a class="reference external" href="http://lists.llvm.org/mailman/listinfo/cfe-dev">mailing
list</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">目录</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User's Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; 版权所有 2007-2025, The Clang Team.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3创建。
    </div>
  </body>
</html>