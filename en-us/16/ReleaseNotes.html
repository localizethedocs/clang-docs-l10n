<!DOCTYPE html>

<html lang="en-US" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Clang Release Notes &#8212; Clang  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=fce32b03" />
    <script src="_static/documentation_options.js?v=ccd1e645"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/clang-docs-l10n/ReleaseNotes.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" />
<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>

  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang  documentation</span></a></h1>
        <h2 class="heading"><span>Clang Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-release-releasenotestitle">
<h1>Clang  Release Notes<a class="headerlink" href="#clang-release-releasenotestitle" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id90">Introduction</a></p></li>
<li><p><a class="reference internal" href="#potentially-breaking-changes" id="id91">Potentially Breaking Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#c-c-language-potentially-breaking-changes" id="id92">C/C++ Language Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#c-specific-potentially-breaking-changes" id="id93">C++ Specific Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-this-version" id="id94">ABI Changes in This Version</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-release" id="id95">What’s New in Clang ?</a></p>
<ul>
<li><p><a class="reference internal" href="#c-language-changes" id="id96">C++ Language Changes</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id97">C Language Changes</a></p></li>
<li><p><a class="reference internal" href="#opencl-kernel-language-changes" id="id98">OpenCL Kernel Language Changes</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id99">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id100">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id101">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id102">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id103">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id104">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-diagnostics" id="id105">Improvements to Clang’s diagnostics</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-in-this-version" id="id106">Bug Fixes in This Version</a></p></li>
<li><p><a class="reference internal" href="#target-specific-changes" id="id107">Target Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#dwarf-support-in-clang" id="id108">DWARF Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#floating-point-support-in-clang" id="id109">Floating Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id110">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id111">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id112">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id113">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#sanitizers" id="id114">Sanitizers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-information" id="id115">Additional Information</a></p></li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<section id="introduction">
<h2><a class="toc-backref" href="#id90" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release . Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. For the libc++ release notes,
see <a class="reference external" href="https://libcxx.llvm.org/ReleaseNotes.html">this page</a>. All LLVM releases
may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="potentially-breaking-changes">
<h2><a class="toc-backref" href="#id91" role="doc-backlink">Potentially Breaking Changes</a><a class="headerlink" href="#potentially-breaking-changes" title="Link to this heading">¶</a></h2>
<p>These changes are ones which we think may surprise users when upgrading to
Clang  because of the opportunity they pose for disruption to existing
code bases.</p>
<ul>
<li><p>Clang’s default C++/ObjC++ standard is now <code class="docutils literal notranslate"><span class="pre">gnu++17</span></code> instead of <code class="docutils literal notranslate"><span class="pre">gnu++14</span></code>.
This means Clang will by default accept code using features from C++17 and
conforming GNU extensions. Projects incompatible with C++17 can add
<code class="docutils literal notranslate"><span class="pre">-std=gnu++14</span></code> to their build settings to restore the previous behaviour.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-fexperimental-new-pass-manager</span></code> and <code class="docutils literal notranslate"><span class="pre">-fno-legacy-pass-manager</span></code>
flags have been removed. These flags have been silently ignored since Clang 15.</p></li>
<li><p>Clang’s resource directory path previously included the full clang version.
It now includes only the major version. The new resource directory is
<code class="docutils literal notranslate"><span class="pre">$prefix/lib/clang/$CLANG_MAJOR_VERSION</span></code> and can be queried using
<code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">-print-resource-dir</span></code>, just like before.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wimplicit-function-declaration</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int</span></code> warnings
now default to an error in C99, C11, and C17. As of C2x,
support for implicit function declarations and implicit int has been removed,
and the warning options will have no effect. Specifying <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int</span></code> in
C89 mode will now issue warnings instead of being a noop.</p>
<p><strong>NOTE</strong>: We recommend that projects using configure scripts verify that the
results do not change before/after setting
<code class="docutils literal notranslate"><span class="pre">-Werror=implicit-function-declarations</span></code> or <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int</span></code> to avoid
incompatibility with Clang 16.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wincompatible-function-pointer-types</span></code> now defaults to an error in all C
language modes. It may be downgraded to a warning with
<code class="docutils literal notranslate"><span class="pre">-Wno-error=incompatible-function-pointer-types</span></code> or disabled entirely with
<code class="docutils literal notranslate"><span class="pre">-Wno-incompatible-function-pointer-types</span></code>.</p>
<p><strong>NOTE:</strong> We recommend that projects using configure scripts verify that the
results do not change before/after setting
<code class="docutils literal notranslate"><span class="pre">-Werror=incompatible-function-pointer-types</span></code> to avoid incompatibility with
Clang 16.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">i</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">other</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">;</span><span class="w"> </span><span class="c1">// Previously a warning, now a downgradable error.</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>To match GCC, <code class="docutils literal notranslate"><span class="pre">__ppc64__</span></code> is no longer defined on PowerPC64 targets. Use
<code class="docutils literal notranslate"><span class="pre">__powerpc64__</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span></code> is rejected for all targets which are not AIX or OpenBSD. <code class="docutils literal notranslate"><span class="pre">-p</span></code> led
to an <code class="docutils literal notranslate"><span class="pre">-Wunused-command-line-argument</span></code> warning in previous releases.</p></li>
</ul>
<section id="c-c-language-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id92" role="doc-backlink">C/C++ Language Potentially Breaking Changes</a><a class="headerlink" href="#c-c-language-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Clang now disallows types whose sizes aren’t a multiple of their alignments
to be used as the element type of arrays.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">int8_a16</span><span class="w"> </span><span class="nf">__attribute__</span><span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">16</span><span class="p">)));</span>
<span class="n">int8_a16</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"> </span><span class="c1">// Now diagnosed as the element size not being a multiple of the array alignment.</span>
</pre></div>
</div>
</li>
<li><p>When compiling for Windows in MSVC compatibility mode (for example by using
clang-cl), the compiler will now propagate dllimport/export declspecs in
explicit specializations of class template member functions (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54717">#54717</a>):</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>
<span class="p">};</span>
<span class="k">template</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">S</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="c1">// clang-cl will now dllexport this.</span>
</pre></div>
</div>
<p>This matches what MSVC does, so it improves compatibility, but it can also
cause errors for code which clang-cl would previously accept, for example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>
<span class="p">};</span>
<span class="k">template</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">S</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span><span class="w">  </span><span class="c1">// Error: cannot delete dllexport function.</span>
</pre></div>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">__declspec</span><span class="p">(</span><span class="n">dllimport</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>
<span class="p">};</span>
<span class="k">template</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">S</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{};</span><span class="w">  </span><span class="c1">// Error: cannot define dllimport function.</span>
</pre></div>
</div>
<p>These errors also match MSVC’s behavior.</p>
</li>
<li><p>Clang now diagnoses indirection of <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code> in C++ mode as a warning which
defaults to an error. This is compatible with ISO C++, GCC, ICC, and MSVC. This
is also now a SFINAE error so constraint checking and SFINAE checking can be
compatible with other compilers. It is expected that this will be upgraded to
an error-only diagnostic in the next Clang release.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">*</span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="c1">// Now diagnosed as a warning-as-error.</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Clang now diagnoses use of a bit-field as an instruction operand in Microsoft
style inline asm blocks as an error. Previously, a bit-field operand yielded
the address of the allocation unit the bit-field was stored within; reads or
writes therefore had the potential to read or write nearby bit-fields.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57791">#57791</a>)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">bf</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">S</span><span class="p">;</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">__asm</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">mov</span><span class="w"> </span><span class="n">eax</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">bf</span><span class="w"> </span><span class="c1">// Now diagnosed as an error.</span>
<span class="w">    </span><span class="n">mov</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">bf</span><span class="p">,</span><span class="w"> </span><span class="n">eax</span><span class="w"> </span><span class="c1">// Now diagnosed as an error.</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Clang now diagnoses if structs/unions with the same name are different in
different used modules. Behavior in C and Objective-C language modes now is
the same as in C++.</p></li>
</ul>
</section>
<section id="c-specific-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id93" role="doc-backlink">C++ Specific Potentially Breaking Changes</a><a class="headerlink" href="#c-specific-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Clang now prohibits non-inline externally-visible definitions in C++
standard header units as per <code class="docutils literal notranslate"><span class="pre">[module.import/6]</span></code>.  In Clang 15,
these definitions were allowed.  Note that such definitions are ODR
violations if the header is included more than once.</p></li>
<li><p>Clang will now correctly diagnose as ill-formed a constant expression where an
enum without a fixed underlying type is set to a value outside the range of
the enumeration’s values.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="nc">E</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Zero</span><span class="p">,</span><span class="w"> </span><span class="n">One</span><span class="p">,</span><span class="w"> </span><span class="n">Two</span><span class="p">,</span><span class="w"> </span><span class="n">Three</span><span class="p">,</span><span class="w"> </span><span class="n">Four</span><span class="w"> </span><span class="p">};</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// Ok</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">7</span><span class="p">;</span><span class="w">  </span><span class="c1">// Ok</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">8</span><span class="p">;</span><span class="w">  </span><span class="c1">// Now diagnosed as out of the range [0, 7]</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">-1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Now diagnosed as out of the range [0, 7]</span>
</pre></div>
</div>
<p>Due to the extended period of time this bug was present in major C++
implementations (including Clang), this error has the ability to be
downgraded into a warning (via: <code class="docutils literal notranslate"><span class="pre">-Wno-error=enum-constexpr-conversion</span></code>) to
provide a transition period for users. This diagnostic is expected to turn
into an error-only diagnostic in the next Clang release.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50055">#50055</a>)</p>
</li>
<li><p>As a side effect of implementing DR692/DR1395/DR1432, Clang now rejects some
overloaded function templates as ambiguous when one of the candidates has a
trailing parameter pack.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">());</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="p">...</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">...);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">h</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// This is rejected due to ambiguity between the pack and the</span>
<span class="w">  </span><span class="c1">// default argument. Only parameters with arguments are considered during</span>
<span class="w">  </span><span class="c1">// partial ordering of function templates.</span>
<span class="w">  </span><span class="n">g</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="abi-changes-in-this-version">
<h3><a class="toc-backref" href="#id94" role="doc-backlink">ABI Changes in This Version</a><a class="headerlink" href="#abi-changes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>GCC doesn’t pack non-POD members in packed structs unless the packed
attribute is also specified on the member. Clang historically did perform
such packing. Clang now matches the gcc behavior
(except on Darwin, PS4 and AIX).
You can switch back to the old ABI behavior with the flag:
<code class="docutils literal notranslate"><span class="pre">-fclang-abi-compat=15.0</span></code>.</p></li>
<li><p>GCC allows POD types to have defaulted special members. Clang historically
classified such types as non-POD (for the purposes of Itanium ABI). Clang now
matches the gcc behavior (except on Darwin, PS4, AIX and z/OS). You can switch
back to the old ABI behavior with the flag: <code class="docutils literal notranslate"><span class="pre">-fclang-abi-compat=15.0</span></code>.</p></li>
</ul>
</section>
</section>
<section id="what-s-new-in-clang-release">
<h2><a class="toc-backref" href="#id95" role="doc-backlink">What’s New in Clang ?</a><a class="headerlink" href="#what-s-new-in-clang-release" title="Link to this heading">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<section id="c-language-changes">
<h3><a class="toc-backref" href="#id96" role="doc-backlink">C++ Language Changes</a><a class="headerlink" href="#c-language-changes" title="Link to this heading">¶</a></h3>
<section id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Link to this heading">¶</a></h4>
<p>Newly implemented papers:</p>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/p0848r3">P0848: Conditionally Trivial Special Member Functions</a>.
Note: The handling of deleted functions is not yet compliant, as Clang
does not implement <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1496">DR1496</a>
and <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1734">DR1734</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/p1091r3">P1091R3</a> and <a class="reference external" href="https://wg21.link/P1381R1">P1381R1</a> to
support capturing structured bindings in lambdas (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/52720">#52720</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54300">#54300</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54301">#54301</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/49430">#49430</a>).</p></li>
<li><p>Implemented <a class="reference external" href="http://wg21.link/p2468r2">P2468R2: The Equality Operator You Are Looking For</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2113R0">P2113R0: Proposed resolution for 2019 comment CA 112</a>
([temp.func.order]p6.2.1 is not implemented, matching GCC).</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0634r3.html">P0634R3: Down with typename!</a>,
which removes the requirement for the <code class="docutils literal notranslate"><span class="pre">typename</span></code> keyword in certain contexts.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0857r0.html">P0857R0: Fixing small-ish functionality gaps in constraints</a>,
which specifies constrained lambdas and constrained template <em>template-parameter</em>s.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p0960r3.html">P0960R3</a>
and <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1975r0.html">P1975R0</a>,
which allow parenthesized aggregate-initialization.</p></li>
</ul>
<p>Notable Bug Fixes to C++20 Features:</p>
<ul class="simple">
<li><p>Clang now correctly delays the instantiation of function constraints until
the time of checking, which should now allow the libstdc++ ranges implementation
to work for at least trivial examples.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/44178">#44178</a>)</p></li>
<li><p>Consider explicitly defaulted constexpr/consteval special member function
template instantiation to be constexpr/consteval even though a call to such
a function cannot appear in a constant expression.
(C++14 [dcl.constexpr]p6 (CWG DR647/CWG DR1358))</p></li>
<li><p>Correctly defer dependent immediate function invocations until template instantiation.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55601">#55601</a>)</p></li>
<li><p>Correctly set expression evaluation context as ‘immediate function context’ in
consteval functions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51182">#51182</a>)</p></li>
<li><p>Skip rebuilding lambda expressions in arguments of immediate invocations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56183">#56183</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51695">#51695</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50455">#50455</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54872">#54872</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54587">#54587</a>)</p></li>
<li><p>Clang implements DR2621, correcting a defect in <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">enum</span></code> handling.  The
name is found via ordinary lookup so typedefs are found.</p></li>
<li><p>Implemented CWG2635 as a Defect Report, which prohibits structured bindings from being constrained.</p></li>
<li><p>When using header modules, inclusion of a private header and violations of
the <a class="reference external" href="https://clang.llvm.org/docs/Modules.html#use-declaration">use-declaration rules</a> are now
diagnosed even when the includer is a textual header. This change can be
temporarily reversed with <code class="docutils literal notranslate"><span class="pre">-Xclang</span>
<span class="pre">-fno-modules-validate-textual-header-includes</span></code>, but this flag will be
removed in a future Clang release.</p></li>
</ul>
</section>
<section id="c-2b-feature-support">
<h4>C++2b Feature Support<a class="headerlink" href="#c-2b-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/p2324r2">P2324R2: Support label at end of compound statement</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P1169R4">P1169R4: static operator()</a> and <a class="reference external" href="https://wg21.link/P2589R1">P2589R1: static operator[]</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2513R3">P2513R3: char8_t Compatibility and Portability Fix</a>.
This change was applied to C++20 as a Defect Report.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2647R1">P2647R1: Permitting static constexpr variables in constexpr functions</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG2640">CWG2640: Allow more characters in an n-char sequence</a>.</p></li>
</ul>
</section>
<section id="resolutions-to-c-defect-reports">
<h4>Resolutions to C++ Defect Reports<a class="headerlink" href="#resolutions-to-c-defect-reports" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/cwg692">DR692</a>, <a class="reference external" href="https://wg21.link/cwg1395">DR1395</a>,
and <a class="reference external" href="https://wg21.link/cwg1432">DR1432</a>. The fix for DR1432 is speculative since the
issue is still open and has no proposed resolution at this time. A speculative fix
for DR1432 is needed to prevent regressions that would otherwise occur due to DR692.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/cwg2358">DR2358</a>, which allows init captures in lambdas in default arguments.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/cwg2654">DR2654</a> which undeprecates
all compound assignments operations on volatile qualified variables.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/cwg2631">DR2631</a>. Invalid <code class="docutils literal notranslate"><span class="pre">consteval</span></code> calls in default arguments and default
member initializers are diagnosed when and if the default is used.
This changes the value of <code class="docutils literal notranslate"><span class="pre">std::source_location::current()</span></code>
used in default parameters calls compared to previous versions of Clang.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56379">#56379</a>)</p></li>
</ul>
</section>
</section>
<section id="id17">
<h3><a class="toc-backref" href="#id97" role="doc-backlink">C Language Changes</a><a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Adjusted <code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> warnings according to <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2562.pdf">WG14 N2562</a>.
Clang will now consider default argument promotions in <code class="docutils literal notranslate"><span class="pre">printf</span></code>, and remove
unnecessary warnings. Especially <code class="docutils literal notranslate"><span class="pre">int</span></code> argument with specifier <code class="docutils literal notranslate"><span class="pre">%hhd</span></code> and
<code class="docutils literal notranslate"><span class="pre">%hd</span></code>.</p></li>
</ul>
<section id="c2x-feature-support">
<h4>C2x Feature Support<a class="headerlink" href="#c2x-feature-support" title="Link to this heading">¶</a></h4>
<ul>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2662.pdf">WG14 N2662</a>,
so the <code class="docutils literal notranslate"><span class="pre">[[maybe_unused]]</span></code> attribute may be applied to a label to silence an
<code class="docutils literal notranslate"><span class="pre">-Wunused-label</span></code> warning.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2508.pdf">WG14 N2508</a>,
so labels can placed everywhere inside a compound statement.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2927.htm">WG14 N2927</a>,
the Not-so-magic <code class="docutils literal notranslate"><span class="pre">typeof</span></code> operator. Also implemented
<a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2930.pdf">WG14 N2930</a>,
renaming <code class="docutils literal notranslate"><span class="pre">remove_quals</span></code>, so the <code class="docutils literal notranslate"><span class="pre">typeof_unqual</span></code> operator is also
supported. Both of these operators are supported only in C2x mode. The
<code class="docutils literal notranslate"><span class="pre">typeof</span></code> operator specifies the type of the given parenthesized expression
operand or type name, including all qualifiers. The <code class="docutils literal notranslate"><span class="pre">typeof_unqual</span></code>
operator is similar to <code class="docutils literal notranslate"><span class="pre">typeof</span></code> except that all qualifiers are removed,
including atomic type qualification and type attributes which behave like a
qualifier, such as an address space attribute.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">__attribute__</span><span class="p">((</span><span class="n">address_space</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">_Atomic</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Val</span><span class="p">;</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">Val</span><span class="p">)</span><span class="w"> </span><span class="n">OtherVal</span><span class="p">;</span><span class="w"> </span><span class="c1">// type is &#39;__attribute__((address_space(1))) const _Atomic int&#39;</span>
<span class="n">typeof_unqual</span><span class="p">(</span><span class="n">Val</span><span class="p">)</span><span class="w"> </span><span class="n">OtherValUnqual</span><span class="p">;</span><span class="w"> </span><span class="c1">// type is &#39;int&#39;</span>
</pre></div>
</div>
</li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3042.htm">WG14 N3042</a>,
Introduce the nullptr constant. This introduces a new type <code class="docutils literal notranslate"><span class="pre">nullptr_t</span></code>,
declared in <code class="docutils literal notranslate"><span class="pre">&lt;stddef.h&gt;</span></code> which represents the type of the null pointer named
constant, <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>. This constant is implicitly convertible to any pointer
type and represents a type-safe null value.</p>
<p>Note, there are some known incompatibilities with this same feature in C++.
The following examples were discovered during implementation and are subject
to change depending on how national body comments are resolved by WG14 (C
status is based on standard requirements, not necessarily implementation
behavior):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">nullptr_t</span><span class="w"> </span><span class="n">null_val</span><span class="p">;</span>
<span class="p">(</span><span class="n">nullptr_t</span><span class="p">)</span><span class="n">nullptr</span><span class="p">;</span><span class="w">       </span><span class="c1">// Rejected in C, accepted in C++, Clang accepts</span>
<span class="p">(</span><span class="kt">void</span><span class="p">)(</span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">nullptr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// Rejected in C, accepted in C++, Clang rejects</span>
<span class="p">(</span><span class="kt">void</span><span class="p">)(</span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">null_val</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Rejected in C, accepted in C++, Clang rejects</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nullptr</span><span class="p">;</span><span class="w">        </span><span class="c1">// Accepted in C, rejected in C++, Clang rejects</span>
<span class="n">b1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">null_val</span><span class="p">;</span><span class="w">            </span><span class="c1">// Accepted in C, rejected in C++, Clang rejects</span>
<span class="n">null_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">             </span><span class="c1">// Rejected in C, accepted in C++, Clang rejects</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">nullptr_t</span><span class="p">);</span>
<span class="n">func</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Rejected in C, accepted in C++, Clang rejects</span>
</pre></div>
</div>
</li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2975.pdf">WG14 N2975</a>,
Relax requirements for va_start. In C2x mode, functions can now be declared
fully variadic and the <code class="docutils literal notranslate"><span class="pre">va_start</span></code> macro no longer requires passing a second
argument (though it accepts a second argument for backwards compatibility).
If a second argument is passed, it is neither expanded nor evaluated in C2x
mode.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Invalid in C17 and earlier, valid in C2x and later.</span>
<span class="w">  </span><span class="kt">va_list</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="w">  </span><span class="n">va_start</span><span class="p">(</span><span class="n">list</span><span class="p">);</span><span class="w"> </span><span class="c1">// Invalid in C17 and earlier, valid in C2x and later.</span>
<span class="w">  </span><span class="n">va_end</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Diagnose type definitions in the <code class="docutils literal notranslate"><span class="pre">type</span></code> argument of <code class="docutils literal notranslate"><span class="pre">__builtin_offsetof</span></code>
as a conforming C extension according to
<a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2350.htm">WG14 N2350</a>.
Also documents the builtin appropriately. Note, a type definition in C++
continues to be rejected.</p></li>
</ul>
</section>
</section>
<section id="opencl-kernel-language-changes">
<h3><a class="toc-backref" href="#id98" role="doc-backlink">OpenCL Kernel Language Changes</a><a class="headerlink" href="#opencl-kernel-language-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Improved diagnostics for C++ templates used in kernel arguments.</p></li>
<li><p>Removed redundant pragma for the <code class="docutils literal notranslate"><span class="pre">arm-integer-dot-product</span></code> extension.</p></li>
<li><p>Improved support of enqueued block for AMDGPU.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">nounwind</span></code> attribute implicitly to all functions.</p></li>
<li><p>Improved builtin functions support:</p>
<ul>
<li><p>Allow disabling default header-based feature/extension support by passing <code class="docutils literal notranslate"><span class="pre">-D__undef_&lt;feature&gt;</span></code>.</p></li>
<li><p>Fixed conditional definition of the depth image and <code class="docutils literal notranslate"><span class="pre">read_write</span> <span class="pre">image3d</span></code> builtins.</p></li>
</ul>
</li>
</ul>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id99" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>It’s now possible to set the crash diagnostics directory through
the environment variable <code class="docutils literal notranslate"><span class="pre">CLANG_CRASH_DIAGNOSTICS_DIR</span></code>.
The <code class="docutils literal notranslate"><span class="pre">-fcrash-diagnostics-dir</span></code> flag takes precedence.</p></li>
<li><p>Unicode support has been updated to support Unicode 15.0.
New unicode codepoints are supported as appropriate in diagnostics,
C and C++ identifiers, and escape sequences.</p></li>
<li><p>In identifiers, Clang allows a restricted set of additional mathematical symbols
as an extension. These symbols correspond to a proposed Unicode
<a class="reference external" href="https://www.unicode.org/L2/L2022/22230-math-profile.pdf">Mathematical notation profile for default identifiers</a>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54732">#54732</a>)</p></li>
<li><p>Clang now supports loading multiple configuration files. The files from
default configuration paths are loaded first, unless <code class="docutils literal notranslate"><span class="pre">--no-default-config</span></code>
option is used. All files explicitly specified using <code class="docutils literal notranslate"><span class="pre">--config=</span></code> option
are loaded afterwards.</p></li>
<li><p>When loading default configuration files, clang now unconditionally uses
the real target triple (respecting options such as <code class="docutils literal notranslate"><span class="pre">--target=</span></code> and <code class="docutils literal notranslate"><span class="pre">-m32</span></code>)
rather than the executable prefix. The respective configuration files are
also loaded when clang is called via an executable without a prefix (e.g.
plain <code class="docutils literal notranslate"><span class="pre">clang</span></code>).</p></li>
<li><p>Default configuration paths were partially changed. Clang now attempts to load
<code class="docutils literal notranslate"><span class="pre">&lt;triple&gt;-&lt;driver&gt;.cfg</span></code> first, and falls back to loading both
<code class="docutils literal notranslate"><span class="pre">&lt;driver&gt;.cfg</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;triple&gt;.cfg</span></code> if the former is not found. <cite>Triple</cite>
is the target triple and <cite>driver</cite> first tries the canonical name
for the driver (respecting <code class="docutils literal notranslate"><span class="pre">--driver-mode=</span></code>), and then the name found
in the executable.</p></li>
<li><p>If the environment variable <code class="docutils literal notranslate"><span class="pre">SOURCE_DATE_EPOCH</span></code> is set, it specifies a UNIX
timestamp to be used in replacement of the current date and time in
the <code class="docutils literal notranslate"><span class="pre">__DATE__</span></code>, <code class="docutils literal notranslate"><span class="pre">__TIME__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__TIMESTAMP__</span></code> macros. See
<a class="reference external" href="https://reproducible-builds.org/docs/source-date-epoch/">https://reproducible-builds.org/docs/source-date-epoch/</a>.</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">__has_constexpr_builtin</span></code> function-like macro that
evaluates to 1 if the builtin is supported and can be constant evaluated.
It can be used to writing conditionally constexpr code that uses builtins.</p></li>
<li><p>The time profiler (using <code class="docutils literal notranslate"><span class="pre">-ftime-trace</span></code> option) now traces various constant
evaluation events.</p></li>
<li><p>Clang can now generate a PCH when using <code class="docutils literal notranslate"><span class="pre">-fdelayed-template-parsing</span></code> for
code with templates containing loop hint pragmas, OpenMP pragmas, and
<code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">unused</span></code>.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id100" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Implemented <code class="docutils literal notranslate"><span class="pre">-fcoro-aligned-allocation</span></code> flag. This flag implements
Option 2 of P2014R0 aligned allocation of coroutine frames
(<a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2014r0.pdf">P2014R0</a>).
With this flag, the coroutines will try to lookup aligned allocation
function all the time. The compiler will emit an error if it fails to
find aligned allocation function. So if the user code implemented self
defined allocation function for coroutines, the existing code will be
broken. A little divergence with P2014R0 is that clang will lookup
<code class="docutils literal notranslate"><span class="pre">::operator</span> <span class="pre">new(size_­t,</span> <span class="pre">std::aligned_val_t,</span> <span class="pre">nothrow_­t)</span></code> if there is
<code class="docutils literal notranslate"><span class="pre">get_­return_­object_­on_­allocation_­failure</span></code>. We feel this is more consistent
with the intention.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--no-default-config</span></code> to disable automatically loading configuration
files using default paths.</p></li>
<li><p>Added the new level, <code class="docutils literal notranslate"><span class="pre">3</span></code>, to the <code class="docutils literal notranslate"><span class="pre">-fstrict-flex-arrays=</span></code> flag. The new
level is the strict, standards-conforming mode for flexible array members. It
recognizes only incomplete arrays as flexible array members (which is how the
feature is defined by the C standard).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">[];</span><span class="w"> </span><span class="c1">// Flexible array member.</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">bar</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="c1">// NOT a flexible array member.</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-fmodule-output</span></code> to enable the one-phase compilation model for
standard C++ modules. See
<a class="reference external" href="https://clang.llvm.org/docs/StandardCPlusPlusModules.html">Standard C++ Modules</a>
for more information.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Rpass-analysis=stack-frame-layout</span></code> which will emit new diagnostic
information about the layout of stack frames through the remarks
infrastructure. Since it uses remarks the diagnostic information is available
both on the CLI, and in a machine readable format.</p></li>
</ul>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id101" role="doc-backlink">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-enable-trivial-auto-var-init-zero-knowing-it-will-be-removed-from-clang</span></code>
has been deprecated. The flag will be removed in Clang 18.
<code class="docutils literal notranslate"><span class="pre">-ftrivial-auto-var-init=zero</span></code> is now available unconditionally, to be
compatible with GCC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fcoroutines-ts</span></code> has been deprecated. The flag will be removed in Clang 17.
Please use <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code> or higher to use standard C++ coroutines instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fmodules-ts</span></code> has been deprecated. The flag will be removed in Clang 17.
Please use <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code> or higher to use standard C++ modules instead.</p></li>
</ul>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id102" role="doc-backlink">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now permits specifying <code class="docutils literal notranslate"><span class="pre">--config=</span></code> multiple times, to load multiple
configuration files.</p></li>
<li><p>The option <code class="docutils literal notranslate"><span class="pre">-rtlib=platform</span></code> can now be used for all targets to override
a different option value (either one set earlier on the command line, or a
built-in hardcoded default). (Previously the MSVC and Darwin targets didn’t
allow this parameter combination.)</p></li>
</ul>
</section>
<section id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id103" role="doc-backlink">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now no longer supports <code class="docutils literal notranslate"><span class="pre">-cc1</span> <span class="pre">-fconcepts-ts</span></code>.  This flag has been deprecated
and encouraged use of <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code> since Clang 10, so we’re now removing it.</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id104" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">__attribute__((guard(nocf)))</span></code> and C++-style
<code class="docutils literal notranslate"><span class="pre">[[clang::guard(nocf)]]</span></code>, which is equivalent to <code class="docutils literal notranslate"><span class="pre">__declspec(guard(nocf))</span></code>
when using the MSVC environment. This is to support enabling Windows Control
Flow Guard checks with the ability to disable them for specific functions when
using the MinGW environment. This attribute is only available for Windows
targets.</p></li>
<li><p>Introduced a new function attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((nouwtable))</span></code> to suppress
LLVM IR <code class="docutils literal notranslate"><span class="pre">uwtable</span></code> function attribute.</p></li>
<li><p>Updated the value returned by <code class="docutils literal notranslate"><span class="pre">__has_c_attribute(nodiscard)</span></code> to <code class="docutils literal notranslate"><span class="pre">202003L</span></code>
based on the final date specified by the C2x committee draft. We already
supported the ability to specify a message in the attribute, so there were no
changes to the attribute behavior.</p></li>
<li><p>Updated the value returned by <code class="docutils literal notranslate"><span class="pre">__has_c_attribute(fallthrough)</span></code> to <code class="docutils literal notranslate"><span class="pre">201910L</span></code>
based on the final date specified by the C2x committee draft. We previously
used <code class="docutils literal notranslate"><span class="pre">201904L</span></code> (the date the proposal was seen by the committee) by mistake.
There were no other changes to the attribute behavior.</p></li>
<li><p>Introduced a new record declaration attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((enforce_read_only_placement))</span></code>
to support analysis of instances of a given type focused on read-only program
memory placement. It emits a warning if something in the code provably prevents
an instance from a read-only memory placement.</p></li>
<li><p>Introduced new attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((target_version(&quot;cpu_features&quot;)))</span></code>
and expanded the functionality of the existing attribute
<code class="docutils literal notranslate"><span class="pre">__attribute__((target_clones(&quot;cpu_features1&quot;,&quot;cpu_features2&quot;,...)))</span></code> to
support Function Multi Versioning on AArch64 target. It detects at runtime
which function versions are supported by CPU and calls the one with highest
priority. Refer to <a class="reference external" href="https://clang.llvm.org/docs/AttributeReference.html#target-version">clang attributes</a> for
more details.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h3><a class="toc-backref" href="#id105" role="doc-backlink">Improvements to Clang’s diagnostics</a><a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Disabled a FIX-IT suggested for a case of bad conversion in system headers.</p></li>
<li><p>Clang will now check compile-time determinable string literals as format strings.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55805">#55805</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> now recognizes <code class="docutils literal notranslate"><span class="pre">%b</span></code> for the <code class="docutils literal notranslate"><span class="pre">printf</span></code>/<code class="docutils literal notranslate"><span class="pre">scanf</span></code> family of
functions and <code class="docutils literal notranslate"><span class="pre">%B</span></code> for the <code class="docutils literal notranslate"><span class="pre">printf</span></code> family of functions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56885">#56885</a>)</p></li>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">-Wsingle-bit-bitfield-constant-conversion</span></code>, grouped under
<code class="docutils literal notranslate"><span class="pre">-Wbitfield-constant-conversion</span></code>, which diagnoses implicit truncation when
<code class="docutils literal notranslate"><span class="pre">1</span></code> is assigned to a 1-bit signed integer bitfield. To reduce
potential false positives, this diagnostic will not diagnose use of the
<code class="docutils literal notranslate"><span class="pre">true</span></code> macro (from <code class="docutils literal notranslate"><span class="pre">&lt;stdbool.h&gt;</span></code>) in C language mode despite the macro
being defined to expand to <code class="docutils literal notranslate"><span class="pre">1</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53253">#53253</a>)</p></li>
<li><p>Clang will now print more information about failed static assertions. In
particular, simple static assertion expressions are evaluated to their
compile-time value and printed out if the assertion fails.</p></li>
<li><p>Diagnostics about uninitialized <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> variables have been improved
to mention the missing constant initializer.</p></li>
<li><p>Correctly diagnose a future keyword if it exists as a keyword in the higher
language version and specifies in which version it will be a keyword. This
supports both C and C++.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no_sanitize(&quot;...&quot;)</span></code> on a global variable for known but not relevant
sanitizers is now just a warning. It now says that this will be ignored
instead of incorrectly saying no_sanitize only applies to functions and
methods.</p></li>
<li><p>No longer mention <code class="docutils literal notranslate"><span class="pre">reinterpet_cast</span></code> in the invalid constant expression
diagnostic note when in C mode.</p></li>
<li><p>Clang will now give a more suitale diagnostic for declaration of block
scope identifiers that have external/internal linkage that has an initializer.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57478">#57478</a>)</p></li>
<li><p>A new analysis pass will helps preserve sugar when combining deductions, in an
order agnostic way. This will be in effect when deducing template arguments,
when deducing function return type from multiple return statements, for the
conditional operator, and for most binary operations. Type sugar is combined
in a way that strips the sugar which is different between terms, and preserves
those which are common.</p></li>
<li><p>Correctly diagnose the use of an integer literal without a suffix whose
underlying type is <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> or <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span></code> as an extension in
C89 mode . Clang previously only diagnosed if the literal had an explicit
<code class="docutils literal notranslate"><span class="pre">LL</span></code> suffix.</p></li>
<li><p>Clang now correctly diagnoses index that refers past the last possible element
of FAM-like arrays.</p></li>
<li><p>Clang now correctly emits a warning when dereferencing a void pointer in C mode.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53631">#53631</a>)</p></li>
<li><p>Clang will now diagnose an overload set where a candidate has a constraint that
refers to an expression with a previous error as nothing viable, so that it
doesn’t generate strange cascading errors, particularly in cases where a
subsuming constraint fails, which would result in a less-specific overload to
be selected.</p></li>
<li><p>Add a fix-it hint for the <code class="docutils literal notranslate"><span class="pre">-Wdefaulted-function-deleted</span></code> warning to
explicitly delete the function.</p></li>
<li><p>Fixed an accidental duplicate diagnostic involving the declaration of a
function definition without a prototype which is preceded by a static
declaration of the function with a prototype.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58181">#58181</a>)</p></li>
<li><p>Copy-elided initialization of lock scopes is now handled differently in
<code class="docutils literal notranslate"><span class="pre">-Wthread-safety-analysis</span></code>: annotations on the move constructor are no
longer taken into account, in favor of annotations on the function returning
the lock scope by value. This could result in new warnings if code depended
on the previous undocumented behavior. As a side effect of this change,
constructor calls outside of initializer expressions are no longer ignored,
which can result in new warnings (or make existing warnings disappear).</p></li>
<li><p>The wording of diagnostics regarding arithmetic on fixed-sized arrays and
pointers is improved to include the type of the array and whether it’s cast
to another type. This should improve comprehension for why an index is
out-of-bounds.</p></li>
<li><p>Clang now correctly points to the problematic parameter for the <code class="docutils literal notranslate"><span class="pre">-Wnonnull</span></code>
warning. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58273">#58273</a>)</p></li>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">-Wcast-function-type-strict</span></code> and
<code class="docutils literal notranslate"><span class="pre">-Wincompatible-function-pointer-types-strict</span></code> to warn about function type
mismatches in casts and assignments that may result in runtime indirect call
<a class="reference external" href="https://clang.llvm.org/docs/ControlFlowIntegrity.html">Control-Flow Integrity (CFI)</a> failures. The
<code class="docutils literal notranslate"><span class="pre">-Wcast-function-type-strict</span></code> diagnostic is grouped under
<code class="docutils literal notranslate"><span class="pre">-Wcast-function-type</span></code> as it identifies a more strict set of potentially
problematic function type casts.</p></li>
<li><p>Clang will now disambiguate NTTP types when printing diagnostic that contain NTTP types.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57562">#57562</a>)</p></li>
<li><p>Better error recovery for pack expansion of expressions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58673">#58673</a>)</p></li>
<li><p>Better diagnostics when the user has missed <code class="docutils literal notranslate"><span class="pre">auto</span></code> in a declaration.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/49129">#49129</a>)</p></li>
<li><p>Clang now diagnoses use of invalid or reserved module names in a module
export declaration. Both are diagnosed as an error, but the diagnostic is
suppressed for use of reserved names in a system header.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Winteger-overflow</span></code> will diagnose overflow in more cases.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58944">#58944</a>)</p></li>
<li><p>Clang has an internal limit of 2GB of preprocessed source code per
compilation, including source reachable through imported AST files such as
PCH or modules. When Clang hits this limit, it now produces notes mentioning
which header and source files are consuming large amounts of this space.
<code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">__debug</span> <span class="pre">sloc_usage</span></code> can also be used to request this report.</p></li>
<li><p>Clang no longer permits the keyword ‘bool’ in a concept declaration as a
concepts-ts compatibility extension.</p></li>
<li><p>Clang now diagnoses overflow undefined behavior in a constant expression while
evaluating a compound assignment with remainder as operand.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">-Wreturn-local-addr</span></code>, a GCC alias for <code class="docutils literal notranslate"><span class="pre">-Wreturn-stack-address</span></code>.</p></li>
<li><p>Clang now suppresses <code class="docutils literal notranslate"><span class="pre">-Wlogical-op-parentheses</span></code> on <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">&amp;&amp;</span> <span class="pre">a</span> <span class="pre">||</span> <span class="pre">b)</span></code> and <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">||</span> <span class="pre">b</span> <span class="pre">&amp;&amp;</span> <span class="pre">x)</span></code>
only when <code class="docutils literal notranslate"><span class="pre">x</span></code> is a string literal.</p></li>
<li><p>Clang will now reject the GNU extension address of label in coroutines explicitly.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56436">#56436</a>)</p></li>
<li><p>Clang now automatically adds <code class="docutils literal notranslate"><span class="pre">[[clang::lifetimebound]]</span></code> to the parameters of
<code class="docutils literal notranslate"><span class="pre">std::move,</span> <span class="pre">std::forward</span></code> et al, this enables Clang to diagnose more cases
where the returned reference outlives the object.</p></li>
<li><p>Fix clang not properly diagnosing the failing subexpression when chained
binary operators are used in a <code class="docutils literal notranslate"><span class="pre">static_assert</span></code> expression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wtautological-compare</span></code> missed warnings for tautological comparisons
involving a negative integer literal.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/42918">#42918</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wcomma</span></code> is no longer emitted for void returning functions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57151">#57151</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-in-this-version">
<h3><a class="toc-backref" href="#id106" role="doc-backlink">Bug Fixes in This Version</a><a class="headerlink" href="#bug-fixes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix crash when attempting to perform parenthesized initialization of an
aggregate with a base class with only non-public constructors.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62296">#62296</a>)</p></li>
<li><p>Fix crash when handling nested immediate invocations in initializers of global
variables.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58207">#58207</a>)</p></li>
<li><p>Fix crash when passing a braced initializer list to a parentehsized aggregate
initialization expression.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63008">#63008</a>).</p></li>
</ul>
<section id="bug-fixes-to-compiler-builtins">
<h4>Bug Fixes to Compiler Builtins<a class="headerlink" href="#bug-fixes-to-compiler-builtins" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdatomic.h</span></code> will use the internal declarations when targeting pre-C++-23
on Windows platforms as the MSVC support requires newer C++ standard.</p></li>
<li><p>Correct <code class="docutils literal notranslate"><span class="pre">_Static_assert</span></code> to accept the same set of extended integer
constant expressions as is accpted in other contexts that accept them.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57687">#57687</a>)</p></li>
<li><p>Fix crashes caused when builtin C++ language extension type traits were
instantiated by templates with an unexpected number of arguments.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57008">#57008</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">__builtin_assume_aligned</span></code> crash when the 1st arg is array type.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57169">#57169</a>)</p></li>
<li><p>Fixes to builtin template emulation of regular templates.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/42102">#42102</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51928">#51928</a>)</p></li>
<li><p>Fix incorrect handling of inline builtins with asm labels.</p></li>
<li><p>The builtin type trait <code class="docutils literal notranslate"><span class="pre">__is_aggregate</span></code> now returns <code class="docutils literal notranslate"><span class="pre">true</span></code> for arrays of incomplete
types in accordance with the suggested fix for <a class="reference external" href="https://cplusplus.github.io/LWG/issue3823">LWG3823</a></p></li>
</ul>
</section>
<section id="bug-fixes-to-attribute-support">
<h4>Bug Fixes to Attribute Support<a class="headerlink" href="#bug-fixes-to-attribute-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixes an accepts-invalid bug in C when using a <code class="docutils literal notranslate"><span class="pre">_Noreturn</span></code> function
specifier on something other than a function declaration.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56800">#56800</a>)</p></li>
<li><p>No longer assert/miscompile when trying to make a vectorized <code class="docutils literal notranslate"><span class="pre">_BitInt</span></code> type
using the <code class="docutils literal notranslate"><span class="pre">ext_vector_type</span></code> attribute (the <code class="docutils literal notranslate"><span class="pre">vector_size</span></code> attribute was
already properly diagnosing this case).</p></li>
<li><p>Invalid destructor names are no longer accepted on template classes.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56772">#56772</a>)</p></li>
<li><p>Improve compile-times with large dynamic array allocations with trivial
constructors.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56774">#56774</a>)</p></li>
<li><p>Fix a crash when a <code class="docutils literal notranslate"><span class="pre">btf_type_tag</span></code> attribute is applied to the pointee of
a function pointer.</p></li>
<li><p>In C mode, when <code class="docutils literal notranslate"><span class="pre">e1</span></code> has <code class="docutils literal notranslate"><span class="pre">__attribute__((noreturn))</span></code> but <code class="docutils literal notranslate"><span class="pre">e2</span></code> doesn’t,
<code class="docutils literal notranslate"><span class="pre">(c</span> <span class="pre">?</span> <span class="pre">e1</span> <span class="pre">:</span> <span class="pre">e2)</span></code> is no longer considered noreturn, fixing a miscompilation.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59792">#59792</a>)</p></li>
<li><p>GNU attributes being applied prior to standard attributes would be handled
improperly, which was corrected to match the behaviour exhibited by GCC.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58229">#58229</a>)</p></li>
<li><p>Fix issue using __attribute__((format)) on non-variadic functions that expect
more than one formatted argument.</p></li>
<li><p>Clang will now no longer treat a C ‘overloadable’ function without a prototype as
a variadic function with the attribute.  This should make further diagnostics more
clear.</p></li>
</ul>
</section>
<section id="bug-fixes-to-c-support">
<h4>Bug Fixes to C++ Support<a class="headerlink" href="#bug-fixes-to-c-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>No longer issue a pre-C++2b compatibility warning in <code class="docutils literal notranslate"><span class="pre">-pedantic</span></code> mode
regading overloaded <cite>operator[]</cite> with more than one parmeter or for static
lambdas. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61582">#61582</a>)</p></li>
<li><p>Address the thread identification problems in coroutines.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47177">#47177</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47179">#47179</a>)</p></li>
<li><p>Reject non-type template arguments formed by casting a non-zero integer
to a pointer in pre-C++17 modes, instead of treating them as null
pointers.</p></li>
<li><p>Fix template arguments of pointer and reference not taking the type as
part of their identity.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47136">#47136</a>)</p></li>
<li><p>Fix handling of unexpanded packs in template argument expressions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58679">#58679</a>)</p></li>
<li><p>Fix bug with <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">enum</span></code> that could lead to enumerators being treated as if
they were part of an overload set.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58057">#58067</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59014">#59014</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54746">#54746</a>)</p></li>
<li><p>Fix bug where constant evaluation treated a pointer to member that points to
a weak member as never being null. Such comparisons are now treated as
non-constant.</p></li>
<li><p>Fix issue that the standard C++ modules importer will call global
constructor/destructor for the global variables in the importing modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59765">#59765</a>)</p></li>
<li><p>Reject in-class defaulting of previously declared comparison operators.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51227">#51227</a>)</p></li>
<li><p>Do not hide templated base members introduced via using-decl in derived class
(useful specially for constrained members). (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50886">#50886</a>)</p></li>
<li><p>Fix default member initializers sometimes being ignored when performing
parenthesized aggregate initialization of templated types.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62266">#62266</a>)</p></li>
<li><p>Fix overly aggressive lifetime checks for parenthesized aggregate
initialization.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61567">#61567</a>)</p></li>
</ul>
<p>Concepts Specific Fixes:</p>
<ul class="simple">
<li><p>Class member variables are now in scope when parsing a <code class="docutils literal notranslate"><span class="pre">requires</span></code> clause.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55216">#55216</a>)</p></li>
<li><p>Required parameter pack to be provided at the end of the concept parameter list.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48182">#48182</a>)</p></li>
<li><p>Correctly handle access-checks in requires expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53364">#53364</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53334">#53334</a>)</p></li>
<li><p>Fixed an issue with concept requirement evaluation, where we incorrectly allowed implicit
conversions to bool for a requirement.  (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54524">#54524</a>)</p></li>
<li><p>Fix a crash when emitting a concept-related diagnostic.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57415">#57415</a>)</p></li>
<li><p>Fix a crash when trying to form a recovery expression on a call inside a
constraint, which re-evaluated the same constraint.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53213">#53213</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/45736">#45736</a>)</p></li>
<li><p>Fix an issue when performing constraints partial ordering on non-template
functions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56154">#56154</a>)</p></li>
<li><p>Fix a number of recursively-instantiated constraint issues, which would possibly
result in a stack overflow.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/44304">#44304</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50891">#50891</a>)</p></li>
<li><p>Finished implementing C++ DR2565, which results in a requirement becoming
not satisfied in the event of an instantiation failures in a requires expression’s
parameter list. We previously handled this correctly in a constraint evaluation
context, but not in a requires clause evaluated as a boolean.</p></li>
</ul>
<p>Consteval Specific Fixes:</p>
<ul class="simple">
<li><p>Fix a crash when generating code coverage information for an
<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">consteval</span></code> statement.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57377">#57377</a>)</p></li>
<li><p>Fixed a crash-on-valid with consteval evaluation of a list-initialized
constructor for a temporary object.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55871">#55871</a>)</p></li>
<li><p>Fixes an assert crash caused by looking up missing vtable information on <code class="docutils literal notranslate"><span class="pre">consteval</span></code>
virtual functions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55065">#55065</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-to-ast-handling">
<h4>Bug Fixes to AST Handling<a class="headerlink" href="#bug-fixes-to-ast-handling" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>A SubstTemplateTypeParmType can now represent the pack index for a
substitution from an expanded pack.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56099">#56099</a>)</p></li>
<li><p>The template arguments of a variable template being accessed as a
member will now be represented in the AST.</p></li>
</ul>
</section>
<section id="miscellaneous-bug-fixes">
<h4>Miscellaneous Bug Fixes<a class="headerlink" href="#miscellaneous-bug-fixes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang configuration files are now read through the virtual file system
rather than the physical one, if these are different.</p></li>
<li><p>Fix an issue where -frewrite-includes generated line control directives with
incorrect line numbers in some cases when a header file used an end of line
character sequence that differed from the primary source file.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59736">#59736</a>)</p></li>
<li><p>Clang 14 predeclared some builtin POSIX library functions in <code class="docutils literal notranslate"><span class="pre">gnu2x</span></code> mode,
and Clang 15 accidentally stopped predeclaring those functions in that
language mode. Clang 16 now predeclares those functions again.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56607">#56607</a>)</p></li>
<li><p>Fix the bug of inserting the <code class="docutils literal notranslate"><span class="pre">ZeroInitializationFixit</span></code> before the template
argument list of <code class="docutils literal notranslate"><span class="pre">VarTemplateSpecializationDecl</span></code>.</p></li>
<li><p>Fix the bug where Clang emits constrained float intrinsics when specifying
<code class="docutils literal notranslate"><span class="pre">-ffp-model=strict</span> <span class="pre">-ffp-model=fast</span></code>.</p></li>
</ul>
</section>
<section id="miscellaneous-clang-crashes-fixed">
<h4>Miscellaneous Clang Crashes Fixed<a class="headerlink" href="#miscellaneous-clang-crashes-fixed" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fix a crash when evaluating a multi-dimensional array’s array filler
expression is element-dependent.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56016">#50601</a>)</p></li>
<li><p>Fix an assert that triggers a crash during template name lookup when a type is
incomplete but was not also a TagType.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57387">#57387</a>)</p></li>
<li><p>Fix a crash when attempting to default a virtual constexpr non-special member
function in a derived class.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57431">#57431</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">-Wpre-c++17-compat</span></code> crashing Clang when compiling C++20 code which
contains deduced template specializations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57369">#57369</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57643">#57643</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57793">#57793</a>)</p></li>
<li><p>Fix a crash upon stray coloncolon token in C2x mode.</p></li>
<li><p>Fix assert that triggers a crash during some types of list initialization that
generate a CXXTemporaryObjectExpr instead of a InitListExpr.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58302">#58302</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58753">#58753</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59100">#59100</a>)</p></li>
<li><p>Fix a crash where we attempt to define a deleted destructor.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57516">#57516</a>)</p></li>
<li><p>Fix an issue that triggers a crash if we instantiate a hidden friend functions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/54457">#54457</a>)</p></li>
<li><p>Fix an issue that makes Clang crash on lambda template parameters.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57960">#57960</a>)</p></li>
<li><p>Fixed a crash in C++20 mode in Clang and Clangd when compile source
with compilation errors.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53628">#53628</a>)</p></li>
<li><p>Fix sanity check when value initializing an empty union so that it takes into
account anonymous structs which is a GNU extension.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58800">#58800</a>)</p></li>
</ul>
</section>
</section>
<section id="target-specific-changes">
<h3><a class="toc-backref" href="#id107" role="doc-backlink">Target Specific Changes</a><a class="headerlink" href="#target-specific-changes" title="Link to this heading">¶</a></h3>
<section id="x86-support">
<h4>X86 Support<a class="headerlink" href="#x86-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Support <code class="docutils literal notranslate"><span class="pre">-mindirect-branch-cs-prefix</span></code> for call and jmp to indirect thunk.</p></li>
<li><p>Fix 32-bit <code class="docutils literal notranslate"><span class="pre">__fastcall</span></code> and <code class="docutils literal notranslate"><span class="pre">__vectorcall</span></code> ABI mismatch with MSVC.</p></li>
<li><p>Add ISA of <code class="docutils literal notranslate"><span class="pre">AMX-FP16</span></code> which support <code class="docutils literal notranslate"><span class="pre">_tile_dpfp16ps</span></code>.</p></li>
<li><p>Switch <code class="docutils literal notranslate"><span class="pre">AVX512-BF16</span></code> intrinsics types from <code class="docutils literal notranslate"><span class="pre">short</span></code> to <code class="docutils literal notranslate"><span class="pre">__bf16</span></code>.</p></li>
<li><p>Add support for <code class="docutils literal notranslate"><span class="pre">PREFETCHI</span></code> instructions.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">CMPCCXADD</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_cmpccxadd_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_cmpccxadd_epi64</span></code>.</p></li>
<li><p>Add support for <code class="docutils literal notranslate"><span class="pre">RAO-INT</span></code> instructions.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_aadd_i32/64</span></code>
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_aand_i32/64</span></code>
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_aor_i32/64</span></code>
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_axor_i32/64</span></code></p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX-IFMA</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_madd52hi_avx_epu64</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_madd52lo_avx_epu64</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX-VNNI-INT8</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpbssd(s)_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpbsud(s)_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpbuud(s)_epi32</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX-NE-CONVERT</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_bcstnebf16_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_bcstnesh_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_cvtneebf16_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_cvtneeph_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_cvtneobf16_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_cvtneoph_ps</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_cvtneps_avx_pbh</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-march=raptorlake</span></code>, <code class="docutils literal notranslate"><span class="pre">-march=meteorlake</span></code> and <code class="docutils literal notranslate"><span class="pre">-march=emeraldrapids</span></code> are now supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-march=sierraforest</span></code>, <code class="docutils literal notranslate"><span class="pre">-march=graniterapids</span></code> and <code class="docutils literal notranslate"><span class="pre">-march=grandridge</span></code> are now supported.</p></li>
<li><p>Lift _BitInt() supported max width from 128 to 8388608.</p></li>
<li><p>Support intrinsics of <code class="docutils literal notranslate"><span class="pre">_mm(256)_reduce_(add|mul|or|and)_epi8/16</span></code>.</p></li>
<li><p>Support intrinsics of <code class="docutils literal notranslate"><span class="pre">_mm(256)_reduce_(max|min)_ep[i|u]8/16</span></code>.</p></li>
</ul>
</section>
<section id="arm-and-aarch64-support">
<h4>Arm and AArch64 Support<a class="headerlink" href="#arm-and-aarch64-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The target(..) function attributes for AArch64 now accept:
* <code class="docutils literal notranslate"><span class="pre">&quot;arch=&lt;arch&gt;&quot;</span></code> strings, that specify the architecture for a function as per the <code class="docutils literal notranslate"><span class="pre">-march</span></code> option.
* <code class="docutils literal notranslate"><span class="pre">&quot;cpu=&lt;cpu&gt;&quot;</span></code> strings, that specify the cpu for a function as per the <code class="docutils literal notranslate"><span class="pre">-mcpu</span></code> option.
* <code class="docutils literal notranslate"><span class="pre">&quot;tune=&lt;cpu&gt;&quot;</span></code> strings, that specify the tune cpu for a function as per <code class="docutils literal notranslate"><span class="pre">-mtune</span></code>.
* <code class="docutils literal notranslate"><span class="pre">&quot;+&lt;feature&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;+no&lt;feature&gt;&quot;</span></code> enables/disables the specific feature, for compatibility with GCC target attributes.
* <code class="docutils literal notranslate"><span class="pre">&quot;&lt;feature&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;no-&lt;feature&gt;&quot;</span></code> enabled/disables the specific feature, for backward compatibility with previous releases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-march</span></code> values for targeting armv2, armv2A, armv3 and armv3M have been removed.
Their presence gave the impression that Clang can correctly generate code for
them, which it cannot.</p></li>
<li><p>Support has been added for the following processors (-mcpu identifiers in parenthesis):
* Arm Cortex-A715 (cortex-a715).
* Arm Cortex-X3 (cortex-x3).
* Arm Neoverse V2 (neoverse-v2)</p></li>
<li><p>Strict floating point has been enabled for AArch64, which means that
<code class="docutils literal notranslate"><span class="pre">-ftrapping-math</span></code>, <code class="docutils literal notranslate"><span class="pre">-frounding-math</span></code>, <code class="docutils literal notranslate"><span class="pre">-ffp-model=strict</span></code>, and
<code class="docutils literal notranslate"><span class="pre">-ffp-exception-behaviour=&lt;arg&gt;</span></code> are now accepted.</p></li>
</ul>
</section>
<section id="windows-support">
<h4>Windows Support<a class="headerlink" href="#windows-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>For the MinGW driver, added the options <code class="docutils literal notranslate"><span class="pre">-mguard=none</span></code>, <code class="docutils literal notranslate"><span class="pre">-mguard=cf</span></code> and
<code class="docutils literal notranslate"><span class="pre">-mguard=cf-nochecks</span></code> (equivalent to <code class="docutils literal notranslate"><span class="pre">/guard:cf-</span></code>, <code class="docutils literal notranslate"><span class="pre">/guard:cf</span></code> and
<code class="docutils literal notranslate"><span class="pre">/guard:cf,nochecks</span></code> in clang-cl) for enabling Control Flow Guard checks
and generation of address-taken function table.</p></li>
<li><p>Switched from SHA1 to BLAKE3 for PDB type hashing / <code class="docutils literal notranslate"><span class="pre">-gcodeview-ghash</span></code></p></li>
<li><p>Fixed code generation with emulated TLS, when the emulated TLS is enabled
by default (with downstream patches; no upstream configurations default
to this configuration, but some mingw downstreams change the default
in this way).</p></li>
<li><p>Improved detection of MinGW cross sysroots for finding sysroots provided
by Linux distributions such as Fedora. Also improved such setups by
avoiding to include <code class="docutils literal notranslate"><span class="pre">/usr/include</span></code> among the include paths when cross
compiling with a cross sysroot based in <code class="docutils literal notranslate"><span class="pre">/usr</span></code>.</p></li>
<li><p>Fix incorrect alignment attribute on the this parameter of certain
non-complete destructors when using the Microsoft ABI.
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60465">Issue 60465</a>.</p></li>
</ul>
</section>
<section id="loongarch-support">
<h4>LoongArch Support<a class="headerlink" href="#loongarch-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now supports LoongArch. Along with the backend, clang is able to build a
large corpus of Linux applications. Test-suite 100% pass.</p></li>
<li><p>Support basic option <code class="docutils literal notranslate"><span class="pre">-march=</span></code> which is used to select the target
architecture, i.e. the basic set of ISA modules to be enabled. Possible values
are <code class="docutils literal notranslate"><span class="pre">loongarch64</span></code> and <code class="docutils literal notranslate"><span class="pre">la464</span></code>.</p></li>
<li><p>Support basic option <code class="docutils literal notranslate"><span class="pre">-mabi=</span></code> which is used to select the base ABI type.
Possible values are <code class="docutils literal notranslate"><span class="pre">lp64d</span></code>, <code class="docutils literal notranslate"><span class="pre">lp64f</span></code>, <code class="docutils literal notranslate"><span class="pre">lp64s</span></code>, <code class="docutils literal notranslate"><span class="pre">ilp32d</span></code>, <code class="docutils literal notranslate"><span class="pre">ilp32f</span></code>
and <code class="docutils literal notranslate"><span class="pre">ilp32s</span></code>.</p></li>
<li><p>Support extended options: <code class="docutils literal notranslate"><span class="pre">-msoft-float</span></code>, <code class="docutils literal notranslate"><span class="pre">-msingle-float</span></code>, <code class="docutils literal notranslate"><span class="pre">-mdouble-float</span></code> and <code class="docutils literal notranslate"><span class="pre">mfpu=</span></code>.
See <a class="reference external" href="https://loongson.github.io/LoongArch-Documentation/LoongArch-toolchain-conventions-EN.html">LoongArch toolchain conventions</a>.</p></li>
</ul>
</section>
<section id="risc-v-support">
<h4>RISC-V Support<a class="headerlink" href="#risc-v-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sifive-7-rv32</span></code> and <code class="docutils literal notranslate"><span class="pre">sifive-7-rv64</span></code> are no longer supported for <code class="docutils literal notranslate"><span class="pre">-mcpu</span></code>.
Use <code class="docutils literal notranslate"><span class="pre">sifive-e76</span></code>, <code class="docutils literal notranslate"><span class="pre">sifive-s76</span></code>, or <code class="docutils literal notranslate"><span class="pre">sifive-u74</span></code> instead.</p></li>
<li><p>Native detections via <code class="docutils literal notranslate"><span class="pre">-mcpu=native</span></code> and <code class="docutils literal notranslate"><span class="pre">-mtune=native</span></code> are supported.</p></li>
<li><p>Fix interaction of <code class="docutils literal notranslate"><span class="pre">-mcpu</span></code> and <code class="docutils literal notranslate"><span class="pre">-march</span></code>, RISC-V backend will take the
architecture extension union of <code class="docutils literal notranslate"><span class="pre">-mcpu</span></code> and <code class="docutils literal notranslate"><span class="pre">-march</span></code> before, and now will
take architecture extensions from <code class="docutils literal notranslate"><span class="pre">-march</span></code> if both are given.</p></li>
<li><p>An ABI mismatch between GCC and Clang that related to the
sign/zero-extension of integer scalars was fixed.</p></li>
<li><p>An overall simplification of the RISC-V Vector intrinsics are done. The
simplification is based on
<a class="reference external" href="https://github.com/riscv-non-isa/rvv-intrinsic-doc/pull/186">riscv-non-isa/rvv-intrinsic-doc#186</a>.</p></li>
<li><p>Intrinsics of <cite>vcompress</cite> and <cite>vmerge</cite> have been adjusted to have interfaces
be aligned among <cite>vvm</cite>, <cite>vxm</cite> intrinsics. The adjustment is base on
<a class="reference external" href="https://github.com/riscv-non-isa/rvv-intrinsic-doc/pull/185">riscv-non-isa/rvv-intrinsic-doc#185</a>.</p></li>
<li><p>All RISC-V Vector intrinsics now share a <cite>__riscv_</cite> prefix, based on the
naming convention defined by
<a class="reference external" href="https://github.com/riscv-non-isa/riscv-c-api-doc/pull/31">riscv-non-isa/riscv-c-api-doc#31</a>.</p></li>
<li><p>Note that the RISC-V Vector C intrinsics are still under development. The RVV
C Intrinsic Task Group is working towards a ratified v1.0.</p></li>
<li><p>The rvv-intrinsic-doc provides <a class="reference external" href="https://github.com/riscv-non-isa/rvv-intrinsic-doc/tree/master/auto-generated/rvv-v0p10-compatible-headers">compatible headers</a> for transition from the previous implemented version to the current (v0.11) version.</p></li>
<li><p>Clang now supports <a class="reference external" href="https://github.com/riscv-non-isa/rvv-intrinsic-doc/tree/v0.11.x">v0.11 RVV intrinsics</a>.</p></li>
</ul>
</section>
<section id="cuda-hip-language-changes-in-clang">
<h4>CUDA/HIP Language Changes in Clang<a class="headerlink" href="#cuda-hip-language-changes-in-clang" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Allow the use of <code class="docutils literal notranslate"><span class="pre">__noinline__</span></code> as a keyword (instead of <code class="docutils literal notranslate"><span class="pre">__attribute__((noinline))</span></code>)
in lambda declarations.</p></li>
</ul>
</section>
<section id="cuda-support">
<h4>CUDA Support<a class="headerlink" href="#cuda-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now supports CUDA SDK up to 11.8</p></li>
<li><p>Added support for targeting sm_{87,89,90} GPUs.</p></li>
</ul>
</section>
<section id="aix-support">
<h4>AIX Support<a class="headerlink" href="#aix-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">-shared</span></code>, the clang driver now invokes llvm-nm to create an
export list if the user doesn’t specify one via linker flag or pass an
alternative export control option.</p></li>
<li><p>Driver work done for <code class="docutils literal notranslate"><span class="pre">-pg</span></code> to link with the right paths and files.</p></li>
</ul>
<ul class="simple">
<li><p>Improved support for <cite>-bcdtors:mbr</cite> and <cite>-bcdtors:csect</cite> linker flags
when linking with -fprofile-generate.</p></li>
<li><p>Enabled LTO support. Requires AIX 7.2 TL5 SP3 or newer, or AIX 7.3. LTO
support is implemented with the <cite>libLTO.so</cite> plugin. To specify a
different plugin, use the linker option <cite>-bplugin:&lt;path to plugin&gt;</cite>.
To pass options to the plugin, use the linker option <cite>-bplugin_opt:&lt;option&gt;</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-mcpu</span></code> option’s values are checked against a list of known CPUs. An error
is reported if the specified CPU model is not found.</p></li>
</ul>
</section>
<section id="webassembly-support">
<h4>WebAssembly Support<a class="headerlink" href="#webassembly-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The -mcpu=generic configuration now enables sign-ext and mutable-globals. These
proposals are standardized and available in all major engines.</p></li>
</ul>
</section>
</section>
<section id="dwarf-support-in-clang">
<h3><a class="toc-backref" href="#id108" role="doc-backlink">DWARF Support in Clang</a><a class="headerlink" href="#dwarf-support-in-clang" title="Link to this heading">¶</a></h3>
<p>Previously when emitting DWARFv4 and tuning for GDB, Clang would use DWARF v2’s
<code class="docutils literal notranslate"><span class="pre">DW_AT_bit_offset</span></code> and <code class="docutils literal notranslate"><span class="pre">DW_AT_data_member_location</span></code>. Clang now uses DWARF v4’s
<code class="docutils literal notranslate"><span class="pre">DW_AT_data_bit_offset</span></code> regardless of tuning.</p>
<p>Support for <code class="docutils literal notranslate"><span class="pre">DW_AT_data_bit_offset</span></code> was added in GDB 8.0. For earlier versions,
you can use the <code class="docutils literal notranslate"><span class="pre">-gdwarf-3</span></code> option to emit compatible DWARF.</p>
</section>
<section id="floating-point-support-in-clang">
<h3><a class="toc-backref" href="#id109" role="doc-backlink">Floating Point Support in Clang</a><a class="headerlink" href="#floating-point-support-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The driver option <code class="docutils literal notranslate"><span class="pre">-menable-unsafe-fp-math</span></code> has been removed. To enable
unsafe floating-point optimizations use <code class="docutils literal notranslate"><span class="pre">-funsafe-math-optimizations</span></code> or
<code class="docutils literal notranslate"><span class="pre">-ffast-math</span></code> instead.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_sin</span></code> and <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_cos</span></code> builtins for floating point types only.</p></li>
</ul>
</section>
<section id="ast-matchers">
<h3><a class="toc-backref" href="#id110" role="doc-backlink">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">isInAnoymousNamespace</span></code> matcher to match declarations in an anonymous namespace.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id111" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">RemoveSemicolon</span></code> option for removing <code class="docutils literal notranslate"><span class="pre">;</span></code> after a non-empty function definition.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">RequiresExpressionIndentation</span></code> option for configuring the alignment of requires-expressions.
The default value of this option is <code class="docutils literal notranslate"><span class="pre">OuterScope</span></code>, which differs in behavior from clang-format 15.
To match the default behavior of clang-format 15, use the <code class="docutils literal notranslate"><span class="pre">Keyword</span></code> value.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">IntegerLiteralSeparator</span></code> option for fixing integer literal separators
in C++, C#, Java, and JavaScript.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">BreakAfterAttributes</span></code> option for breaking after a group of C++11
attributes before a function declaration/definition name.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">InsertNewlineAtEOF</span></code> option for inserting a newline at EOF if missing.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">LineEnding</span></code> option to deprecate <code class="docutils literal notranslate"><span class="pre">DeriveLineEnding</span></code> and <code class="docutils literal notranslate"><span class="pre">UseCRLF</span></code>.</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id112" role="doc-backlink">libclang</a><a class="headerlink" href="#libclang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_getUnqualifiedType</span></code>, which mimics
the behavior of <code class="docutils literal notranslate"><span class="pre">QualType::getUnqualifiedType</span></code> for <code class="docutils literal notranslate"><span class="pre">CXType</span></code>.</p></li>
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_getNonReferenceType</span></code>, which mimics
the behavior of <code class="docutils literal notranslate"><span class="pre">QualType::getNonReferenceType</span></code> for <code class="docutils literal notranslate"><span class="pre">CXType</span></code>.</p></li>
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_CXXMethod_isDeleted</span></code>, which queries
whether the method is declared <code class="docutils literal notranslate"><span class="pre">=</span> <span class="pre">delete</span></code>.</p></li>
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_CXXMethod_isCopyAssignmentOperator</span></code>,
which identifies whether a method cursor is a copy-assignment
operator.</p></li>
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_CXXMethod_isMoveAssignmentOperator</span></code>,
which identifies whether a method cursor is a move-assignment
operator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clang_Cursor_getNumTemplateArguments</span></code>, <code class="docutils literal notranslate"><span class="pre">clang_Cursor_getTemplateArgumentKind</span></code>,
<code class="docutils literal notranslate"><span class="pre">clang_Cursor_getTemplateArgumentType</span></code>, <code class="docutils literal notranslate"><span class="pre">clang_Cursor_getTemplateArgumentValue</span></code> and
<code class="docutils literal notranslate"><span class="pre">clang_Cursor_getTemplateArgumentUnsignedValue</span></code> now work on struct, class,
and partial template specialization cursors in addition to function cursors.</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id113" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Removed the deprecated <code class="docutils literal notranslate"><span class="pre">-analyzer-store</span></code> and
<code class="docutils literal notranslate"><span class="pre">-analyzer-opt-analyze-nested-blocks</span></code> analyzer flags.
<code class="docutils literal notranslate"><span class="pre">scanbuild</span></code> was also updated accordingly.
Passing these flags will result in a hard error.</p></li>
<li><p>Deprecate the <code class="docutils literal notranslate"><span class="pre">consider-single-element-arrays-as-flexible-array-members</span></code>
analyzer-config option.
This option will be still accepted, but a warning will be displayed.
This option will be rejected, thus turned into a hard error starting with
<code class="docutils literal notranslate"><span class="pre">clang-17</span></code>. Use <code class="docutils literal notranslate"><span class="pre">-fstrict-flex-array=&lt;N&gt;</span></code> instead if necessary.</p></li>
<li><p>Trailing array objects of structs with single elements will be considered
as flexible-array-members. Use <code class="docutils literal notranslate"><span class="pre">-fstrict-flex-array=&lt;N&gt;</span></code> to define
what should be considered as flexible-array-member if needed.</p></li>
</ul>
</section>
<section id="sanitizers">
<span id="release-notes-sanitizers"></span><h3><a class="toc-backref" href="#id114" role="doc-backlink">Sanitizers</a><a class="headerlink" href="#sanitizers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-fsanitize-memory-param-retval</span></code> is turned on by default. With
<code class="docutils literal notranslate"><span class="pre">-fsanitize=memory</span></code>, passing uninitialized variables to functions and
returning uninitialized variables from functions is more aggressively
reported. <code class="docutils literal notranslate"><span class="pre">-fno-sanitize-memory-param-retval</span></code> restores the previous
behavior.</p></li>
</ul>
</section>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id115" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Link to this heading">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us on the <a class="reference external" href="https://discourse.llvm.org/c/clang/6">Discourse forums (Clang Frontend category)</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2007-2025, The Clang Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>